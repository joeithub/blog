<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>mycat | Learning</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Mycat前世今生2013年阿里的Cobar在社区使用过程中发现存在一些比较严重的问题，及其使用限制，经过Mycat发起人第一次改良，第一代改良版——Mycat诞生。 Mycat开源以后，一些Cobar的用户参与了Mycat的开发，最终Mycat发展成为一个由众多软件公司的实力派架构师和资深开发人员维护的社区型开源软件。 2014年Mycat首次在上海的《中华架构师》大会上对外宣讲，更多的人参与进">
<meta name="keywords" content="JAVAEE,MYCAT">
<meta property="og:type" content="article">
<meta property="og:title" content="mycat">
<meta property="og:url" content="/blog/2019/09/23/mycat/index.html">
<meta property="og:site_name" content="Learning">
<meta property="og:description" content="Mycat前世今生2013年阿里的Cobar在社区使用过程中发现存在一些比较严重的问题，及其使用限制，经过Mycat发起人第一次改良，第一代改良版——Mycat诞生。 Mycat开源以后，一些Cobar的用户参与了Mycat的开发，最终Mycat发展成为一个由众多软件公司的实力派架构师和资深开发人员维护的社区型开源软件。 2014年Mycat首次在上海的《中华架构师》大会上对外宣讲，更多的人参与进">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="/images/pasted-157.png">
<meta property="og:updated_time" content="2020-06-13T07:49:08.203Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mycat">
<meta name="twitter:description" content="Mycat前世今生2013年阿里的Cobar在社区使用过程中发现存在一些比较严重的问题，及其使用限制，经过Mycat发起人第一次改良，第一代改良版——Mycat诞生。 Mycat开源以后，一些Cobar的用户参与了Mycat的开发，最终Mycat发展成为一个由众多软件公司的实力派架构师和资深开发人员维护的社区型开源软件。 2014年Mycat首次在上海的《中华架构师》大会上对外宣讲，更多的人参与进">
<meta name="twitter:image" content="/images/pasted-157.png">
  
    <link rel="alternate" href="/atom.xml" title="Learning" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Learning</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Joe&#39;s Blog</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="/blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-mycat" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/23/mycat/" class="article-date">
  <time datetime="2019-09-23T17:28:00.000Z" itemprop="datePublished">2019-09-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/IT/">IT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      mycat
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="Mycat前世今生"><a href="#Mycat前世今生" class="headerlink" title="Mycat前世今生"></a>Mycat前世今生</h4><p>2013年阿里的Cobar在社区使用过程中发现存在一些比较严重的问题，及其使用限制，经过Mycat发起人第一次改良，第一代改良版——Mycat诞生。 Mycat开源以后，一些Cobar的用户参与了Mycat的开发，最终Mycat发展成为一个由众多软件公司的实力派架构师和资深开发人员维护的社区型开源软件。</p>
<p>2014年Mycat首次在上海的《中华架构师》大会上对外宣讲，更多的人参与进来，随后越来越多的项目采用了Mycat。</p>
<p>2015年5月，由核心参与者们一起编写的第一本官方权威指南《Mycat权威指南》电子版发布，累计超过500本，成为开源项目中的首创。</p>
<p>2015年10月为止，Mycat项目总共有16个Committer。</p>
<p>截至2015年11月，超过300个项目采用Mycat，涵盖银行、电信、电子商务、物流、移动应用、O2O的众多领域和公司。</p>
<p>截至2015年12月，超过4000名用户加群或研究讨论或测试或使用Mycat。</p>
<p>Mycat是基于开源cobar演变而来，我们对cobar的代码进行了彻底的重构，使用NIO重构了网络模块，并且优化了Buffer内核，增强了聚合，Join等基本特性，同时兼容绝大多数数据库成为通用的数据库中间件。1.4 版本以后 完全的脱离基本cobar内核，结合Mycat集群管理、自动扩容、智能优化，成为高性能的中间件。我们致力于开发高性能数据库中间而努力。永不收费，永不闭源，持续推动开源社区的发展。</p>
<p>Mycat吸引和聚集了一大批业内大数据和云计算方面的资深工程师，Mycat的发展壮大基于开源社区志愿者的持续努力，感谢社区志愿者的努力让Mycat更加强大，同时我们也欢迎社区更多的志愿者，特别是公司能够参与进来，参与Mycat的开发，一起推动社区的发展，为社区提供更好的开源中间件。</p>
<p>Mycat还不够强大，Mycat还有很多不足，欢迎社区志愿者的持续优化改进。</p>
<h4 id="关键特性"><a href="#关键特性" class="headerlink" title="关键特性"></a>关键特性</h4><p>支持SQL92标准</p>
<p>遵守Mysql原生协议，跨语言，跨平台，跨数据库的通用中间件代理。</p>
<p>基于心跳的自动故障切换，支持读写分离，支持MySQL主从，以及galera cluster集群。</p>
<p>支持Galera for MySQL集群，Percona Cluster或者MariaDB cluster</p>
<p>基于Nio实现，有效管理线程，高并发问题。</p>
<p>支持数据的多片自动路由与聚合，支持sum,count,max等常用的聚合函数。</p>
<p>支持单库内部任意join，支持跨库2表join，甚至基于caltlet的多表join。</p>
<p>支持通过全局表，ER关系的分片策略，实现了高效的多表join查询。</p>
<p>支持多租户方案。</p>
<p>支持分布式事务（弱xa）。</p>
<p>支持全局序列号，解决分布式下的主键生成问题。</p>
<p>分片规则丰富，插件化开发，易于扩展。</p>
<p>强大的web，命令行监控。</p>
<p>支持前端作为mysq通用代理，后端JDBC方式支持Oracle、DB2、SQL Server 、 mongodb 、巨杉。</p>
<p>支持密码加密</p>
<p>支持服务降级</p>
<p>支持IP白名单</p>
<p>支持SQL黑名单、sql注入攻击拦截</p>
<p>支持分表（1.6）</p>
<p>集群基于ZooKeeper管理，在线升级，扩容，智能优化，大数据处理（2.0开发版）。</p>
<h3 id="Mycat安装与使用"><a href="#Mycat安装与使用" class="headerlink" title="Mycat安装与使用"></a>Mycat安装与使用</h3><h5 id="下载："><a href="#下载：" class="headerlink" title="下载："></a>下载：</h5><p><a href="https://github.com/MyCATApache/Mycat-download" target="_blank" rel="noopener">https://github.com/MyCATApache/Mycat-download</a> 具体下载哪个版本以发布为准，推荐1.4,1.5.  </p>
<h5 id="安装："><a href="#安装：" class="headerlink" title="安装："></a>安装：</h5><p>下载的文件直接解压即可。</p>
<h4 id="运行："><a href="#运行：" class="headerlink" title="运行："></a>运行：</h4><p>linux：  </p>
<p><code>./mycat start</code> 启动</p>
<p><code>./mycat stop</code> 停止</p>
<p><code>./mycat console</code> 前台运行</p>
<p><code>./mycat install</code> 添加到系统自动启动（暂未实现）</p>
<p><code>./mycat remove</code> 取消随系统自动启动（暂未实现）</p>
<p><code>./mycat restart</code> 重启服务</p>
<p><code>./mycat pause</code> 暂停</p>
<p><code>./mycat status</code> 查看启动状态</p>
<p>win：<br>直接运行startup_nowrap.bat，如果出现闪退，在cmd 命令行运行，查看出错原因。</p>
<h4 id="内存配置："><a href="#内存配置：" class="headerlink" title="内存配置："></a>内存配置：</h4><p>启动前，一般需要修改JVM配置参数，打开conf/wrapper.conf文件，如下行的内容为2G和2048，可根据本机配置情况修改为512M或其它值。 以下配置跟jvm参数完全一致，可以根据自己的jvm参数调整。  </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Java Additional Parameters</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">1</span>=</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">1</span>=-DMYCAT_HOME=.</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">2</span>=-server</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">3</span>=-XX:MaxPermSize=<span class="number">64</span>M</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">4</span>=-XX:+AggressiveOpts</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">5</span>=-XX:MaxDirectMemorySize=<span class="number">100</span>m</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">6</span>=-Dcom<span class="selector-class">.sun</span><span class="selector-class">.management</span><span class="selector-class">.jmxremote</span></span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">7</span>=-Dcom<span class="selector-class">.sun</span><span class="selector-class">.management</span><span class="selector-class">.jmxremote</span><span class="selector-class">.port</span>=<span class="number">1984</span></span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">8</span>=-Dcom<span class="selector-class">.sun</span><span class="selector-class">.management</span><span class="selector-class">.jmxremote</span><span class="selector-class">.authenticate</span>=false</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">9</span>=-Dcom<span class="selector-class">.sun</span><span class="selector-class">.management</span><span class="selector-class">.jmxremote</span><span class="selector-class">.ssl</span>=false</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">10</span>=-Xmx100m</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">11</span>=-Xms100m</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">12</span>=-XX:+UseParNewGC</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">13</span>=-XX:+UseConcMarkSweepGC</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">14</span>=-XX:+UseCMSCompactAtFullCollection</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">15</span>=-XX:CMSFullGCsBeforeCompaction=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.additional</span>.<span class="number">16</span>=-XX:CMSInitiatingOccupancyFraction=<span class="number">70</span></span><br><span class="line"></span><br><span class="line">以下配置作废：</span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.initmemory</span>=<span class="number">3</span></span><br><span class="line"></span><br><span class="line">wrapper<span class="selector-class">.java</span><span class="selector-class">.maxmemory</span>=<span class="number">64</span></span><br></pre></td></tr></table></figure>

<h4 id="Mycat连接测试："><a href="#Mycat连接测试：" class="headerlink" title="Mycat连接测试："></a>Mycat连接测试：</h4><p>测试mycat与测试mysql完全一致，mysql怎么连接，mycat就怎么连接。</p>
<p>推荐先采用命令行测试：  </p>
<p><code>mysql -uroot -proot -P8066 -h127.0.0.1</code> </p>
<p>如果采用工具连接，1.4,1.3目前部分工具无法连接，会提示database not selected，建议采用高版本，navicat测试。1.5已经修复了部分工具连接。    </p>
<h4 id="Mycat配置入门"><a href="#Mycat配置入门" class="headerlink" title="Mycat配置入门"></a>Mycat配置入门</h4><p>配置：</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">--bin 启动目录</span><br><span class="line"></span><br><span class="line">--conf 配置目录存放配置文件：</span><br><span class="line"></span><br><span class="line">--server.xml：是Mycat服务器参数调整和用户授权的配置文件。</span><br><span class="line"></span><br><span class="line">  --schema.xml：是逻辑库定义和表以及分片定义的配置文件。</span><br><span class="line"></span><br><span class="line">  --rule.xml：  是分片规则的配置文件，分片规则的具体一些参数信息单独存放为文件，也在这个目录下，配置文件修改需要重启MyCAT。</span><br><span class="line"></span><br><span class="line">  --log4j.xml： 日志存放在logs/log中，每天一个文件，日志的配置是在conf/log4j.xml中，根据自己的需要可以调整输出级别为debug                           debug级别下，会输出更多的信息，方便排查问题。</span><br><span class="line"></span><br><span class="line">  --autopartition-long.txt,partition-hash-int.txt,sequence_conf.properties， sequence_db_conf.properties 分片相关的id分片规则配置文件</span><br><span class="line"></span><br><span class="line">  --<span class="class"><span class="keyword">lib</span>	    <span class="title">MyCAT</span>自身的<span class="title">jar</span>包或依赖的<span class="title">jar</span>包的存放目录。</span></span><br><span class="line"></span><br><span class="line">  --logs        MyCAT日志的存放目录。日志存放在logs/log中，每天一个文件</span><br></pre></td></tr></table></figure>

<p><img src="/images/pasted-157.png" alt="upload successful"></p>
<h4 id="逻辑库配置："><a href="#逻辑库配置：" class="headerlink" title="逻辑库配置："></a>逻辑库配置：</h4><p>配置server.xml<br>添加两个mycat逻辑库：user,pay<br>system 参数是所有的mycat参数配置，比如添加解析器：defaultSqlParser，其他类推<br>user 是用户参数。  </p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&amp;<span class="keyword">lt</span>;system&amp;<span class="keyword">gt</span>;</span><br><span class="line"></span><br><span class="line">	&amp;<span class="keyword">lt</span>;<span class="keyword">property</span><span class="title"> </span><span class="attr">name=</span><span class="string">"defaultSqlParser"</span>&amp;<span class="keyword">gt</span>;druidparser&amp;<span class="keyword">lt</span>;/<span class="keyword">property</span><span class="title"></span>&amp;<span class="keyword">gt</span>;</span><br><span class="line"></span><br><span class="line">&amp;<span class="keyword">lt</span>;/system&amp;<span class="keyword">gt</span>;</span><br><span class="line"></span><br><span class="line">&amp;<span class="keyword">lt</span>;<span class="keyword">user</span> <span class="title">name</span>=<span class="string">"mycat"</span>&amp;<span class="keyword">gt</span>;</span><br><span class="line"></span><br><span class="line">	&amp;<span class="keyword">lt</span>;<span class="keyword">property</span><span class="title"> </span><span class="attr">name=</span><span class="string">"password"</span>&amp;<span class="keyword">gt</span>;mycat&amp;<span class="keyword">lt</span>;/<span class="keyword">property</span><span class="title"></span>&amp;<span class="keyword">gt</span>;</span><br><span class="line"></span><br><span class="line">	&amp;<span class="keyword">lt</span>;<span class="keyword">property</span><span class="title"> </span><span class="attr">name=</span><span class="string">"schemas"</span>&amp;<span class="keyword">gt</span>;user,pay&amp;<span class="keyword">lt</span>;/<span class="keyword">property</span><span class="title"></span>&amp;<span class="keyword">gt</span>;</span><br><span class="line"></span><br><span class="line">&amp;<span class="keyword">lt</span>;/user&amp;<span class="keyword">gt</span>;</span><br></pre></td></tr></table></figure>

<p>编辑schema.xml<br>修改dataHost和schema对应的连接信息，user,pay 垂直切分后的配置如下所示：</p>
<p>schema 是实际逻辑库的配置，user，pay分别对应两个逻辑库，多个schema代表多个逻辑库。</p>
<p>dataNode是逻辑库对应的分片，如果配置多个分片只需要多个dataNode即可。</p>
<p>dataHost是实际的物理库配置地址，可以配置多主主从等其他配置，多个dataHost代表分片对应的物理库地址，下面的writeHost、readHost代表该分片是否配置多写，主从，读写分离等高级特性。</p>
<p>以下例子配置了两个writeHost为主从。</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&amp;<span class="literal">lt</span>;<span class="keyword">schema</span><span class="built_in"> name</span>=<span class="string">"user"</span> checkSQLschema=<span class="string">"false"</span> sqlMaxLimit=<span class="string">"100"</span> dataNode=<span class="string">"user"</span> /&amp;<span class="literal">gt</span>;</span><br><span class="line">&amp;<span class="literal">lt</span>;<span class="keyword">schema</span><span class="built_in"> name</span>=<span class="string">"pay"</span>  checkSQLschema=<span class="string">"false"</span> sqlMaxLimit=<span class="string">"100"</span> dataNode=<span class="string">"pay"</span> &amp;<span class="literal">gt</span>;</span><br><span class="line">   &amp;<span class="literal">lt</span>;table<span class="built_in"> name</span>=<span class="string">"order"</span> dataNode=<span class="string">"pay1,pay2"</span> rule=<span class="string">"rule1"</span>/&amp;<span class="literal">gt</span>;</span><br><span class="line">&amp;<span class="literal">lt</span>;/<span class="keyword">schema</span>&amp;<span class="literal">gt</span>;</span><br><span class="line"></span><br><span class="line">&amp;<span class="literal">lt</span>;dataNode<span class="built_in"> name</span>=<span class="string">"user"</span> dataHost=<span class="string">"host"</span> database=<span class="string">"user"</span> /&amp;<span class="literal">gt</span>;</span><br><span class="line">&amp;<span class="literal">lt</span>;dataNode<span class="built_in"> name</span>=<span class="string">"pay1"</span> dataHost=<span class="string">"host"</span> database=<span class="string">"pay1"</span> /&amp;<span class="literal">gt</span>;</span><br><span class="line">&amp;<span class="literal">lt</span>;dataNode<span class="built_in"> name</span>=<span class="string">"pay2"</span> dataHost=<span class="string">"host"</span> database=<span class="string">"pay2"</span> /&amp;<span class="literal">gt</span>;</span><br><span class="line"></span><br><span class="line">&amp;<span class="literal">lt</span>;dataHost<span class="built_in"> name</span>=<span class="string">"host"</span> maxCon=<span class="string">"1000"</span> minCon=<span class="string">"10"</span> balance=<span class="string">"0"</span></span><br><span class="line">   writeType=<span class="string">"0"</span> dbType=<span class="string">"mysql"</span> dbDriver=<span class="string">"native"</span>&amp;<span class="literal">gt</span>;</span><br><span class="line">   &amp;<span class="literal">lt</span>;heartbeat&amp;<span class="literal">gt</span>;select <span class="number">1</span>&amp;<span class="literal">lt</span>;/heartbeat&amp;<span class="literal">gt</span>;</span><br><span class="line">   &amp;<span class="literal">lt</span>;!-- can have multi write hosts --&amp;<span class="literal">gt</span>;</span><br><span class="line">   &amp;<span class="literal">lt</span>;writeHost host=<span class="string">"hostM1"</span> url=<span class="string">"192.168.0.2:3306"</span> user=<span class="string">"root"</span> password=<span class="string">"root"</span> /&amp;<span class="literal">gt</span>;</span><br><span class="line">   &amp;<span class="literal">lt</span>;writeHost host=<span class="string">"hostM2"</span> url=<span class="string">"192.168.0.3:3306"</span> user=<span class="string">"root"</span> password=<span class="string">"root"</span> /&amp;<span class="literal">gt</span>;</span><br><span class="line">&amp;<span class="literal">lt</span>;/dataHost&amp;<span class="literal">gt</span>;</span><br></pre></td></tr></table></figure>

<p>Mycat逻辑库、系统参数配置<br>配置Mycat环境参数  </p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&amp;<span class="keyword">lt</span>;?<span class="keyword">xml</span> <span class="title">version</span>=<span class="string">"1.0"</span> <span class="attr">encoding=</span><span class="string">"UTF-8"</span> <span class="attr">standalone=</span><span class="string">"no"</span>?&amp;<span class="keyword">gt</span>;</span><br><span class="line">&amp;<span class="keyword">lt</span>;!DOCTYPE mycat:server SYSTEM <span class="string">"server.dtd"</span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">&amp;<span class="keyword">lt</span>;mycat:server xmlns:<span class="attr">mycat=</span><span class="string">"http://org.opencloudb/"</span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">   &amp;<span class="keyword">lt</span>;system&amp;<span class="keyword">gt</span>;</span><br><span class="line">	  &amp;<span class="keyword">lt</span>;<span class="keyword">property</span><span class="title"> </span><span class="attr">name=</span><span class="string">"defaultSqlParser"</span>&amp;<span class="keyword">gt</span>;druidparser&amp;<span class="keyword">lt</span>;/<span class="keyword">property</span><span class="title"></span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">    &amp;<span class="keyword">lt</span>;/system&amp;<span class="keyword">gt</span>; </span><br><span class="line"> &amp;<span class="keyword">lt</span>;/mycat:server&amp;<span class="keyword">gt</span>;</span><br></pre></td></tr></table></figure>


<p> 如例子中配置的所有的Mycat参数变量都是配置在server.xml 文件中，system标签下配置所有的参数，如果需要配置某个变量添加相应的配置即可，例如添加启动端口8066，默认为8066：</p>
<p>  <code>&amp;lt;property name=&quot;serverPort&quot;&amp;gt;8066&amp;lt;/property&amp;gt;</code><br>  其他所有变量类似。<br>  配置Mycat逻辑库与用户  </p>
  <figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  &amp;<span class="keyword">lt</span>;?<span class="keyword">xml</span> <span class="title">version</span>=<span class="string">"1.0"</span> <span class="attr">encoding=</span><span class="string">"UTF-8"</span> <span class="attr">standalone=</span><span class="string">"no"</span>?&amp;<span class="keyword">gt</span>;</span><br><span class="line">&amp;<span class="keyword">lt</span>;!DOCTYPE mycat:server SYSTEM <span class="string">"server.dtd"</span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">&amp;<span class="keyword">lt</span>;mycat:server xmlns:<span class="attr">mycat=</span><span class="string">"http://org.opencloudb/"</span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">&amp;<span class="keyword">lt</span>;<span class="keyword">user</span> <span class="title">name</span>=<span class="string">"mycat"</span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">	&amp;<span class="keyword">lt</span>;<span class="keyword">property</span><span class="title"> </span><span class="attr">name=</span><span class="string">"password"</span>&amp;<span class="keyword">gt</span>;mycat&amp;<span class="keyword">lt</span>;/<span class="keyword">property</span><span class="title"></span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">	&amp;<span class="keyword">lt</span>;<span class="keyword">property</span><span class="title"> </span><span class="attr">name=</span><span class="string">"schemas"</span>&amp;<span class="keyword">gt</span>;TESTDB&amp;<span class="keyword">lt</span>;/<span class="keyword">property</span><span class="title"></span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">&amp;<span class="keyword">lt</span>;/user&amp;<span class="keyword">gt</span>;</span><br><span class="line"> &amp;<span class="keyword">lt</span>;/mycat:server&amp;<span class="keyword">gt</span>;</span><br></pre></td></tr></table></figure>


<p> 如例子中配置的所有的Mycat连接的用户与逻辑库映射都是配置在server.xml 文件中，user标签下配置所有的参数，例如例子中配置了一个mycat用户供应用连接到mycat，同时mycat 在schema.xml中配置后了一个逻辑库TESTDB，配置好逻辑库与用户的映射关系。  </p>
<h4 id="逻辑库、表分片配置"><a href="#逻辑库、表分片配置" class="headerlink" title="逻辑库、表分片配置"></a>逻辑库、表分片配置</h4><h5 id="配置逻辑库（schema）"><a href="#配置逻辑库（schema）" class="headerlink" title="配置逻辑库（schema）"></a>配置逻辑库（schema）</h5><p>Mycat作为一个中间件，实现mysql协议，那么对前端应用连接来说就是一个数据库，也就有数据库的配置，mycat的数据库配置是在schema.xml中配置，配置好后映射到server.xml里面的用户就可以了。  </p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&amp;<span class="literal">lt</span>;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&amp;<span class="literal">gt</span>;</span><br><span class="line">&amp;<span class="literal">lt</span>;!DOCTYPE mycat:schema SYSTEM <span class="string">"schema.dtd"</span>&amp;<span class="literal">gt</span>;</span><br><span class="line"></span><br><span class="line">&amp;<span class="literal">lt</span>;mycat:schema  xmlns:mycat=<span class="string">"http://org.opencloudb/"</span>&amp;<span class="literal">gt</span>;</span><br><span class="line">  &amp;<span class="literal">lt</span>;<span class="keyword">schema</span><span class="built_in"> name</span>=<span class="string">"TESTDB"</span> checkSQLschema=<span class="string">"true"</span> sqlMaxLimit=<span class="string">"100"</span> dataNode=<span class="string">"dn1"</span>&amp;<span class="literal">gt</span>;</span><br><span class="line">      &amp;<span class="literal">lt</span>;table<span class="built_in"> name</span>=<span class="string">"t_user"</span> dataNode=<span class="string">"dn1,dn2"</span> rule=<span class="string">"sharding-by-mod2"</span>/&amp;<span class="literal">gt</span>;</span><br><span class="line">      &amp;<span class="literal">lt</span>;table<span class="built_in"> name</span>=<span class="string">"ht_jy_login_log"</span> primaryKey=<span class="string">"ID"</span> dataNode=<span class="string">"dn1,dn2"</span> rule=<span class="string">"sharding-by-date_jylog"</span>/&amp;<span class="literal">gt</span>;</span><br><span class="line">  &amp;<span class="literal">lt</span>;/<span class="keyword">schema</span>&amp;<span class="literal">gt</span>;</span><br><span class="line">  &amp;<span class="literal">lt</span>;dataNode<span class="built_in"> name</span>=<span class="string">"dn1"</span> dataHost=<span class="string">"localhost1"</span> database=<span class="string">"mycat_node1"</span>/&amp;<span class="literal">gt</span>;</span><br><span class="line">  &amp;<span class="literal">lt</span>;dataNode<span class="built_in"> name</span>=<span class="string">"dn2"</span> dataHost=<span class="string">"localhost1"</span> database=<span class="string">"mycat_node2"</span>/&amp;<span class="literal">gt</span>;</span><br><span class="line">  </span><br><span class="line">  &amp;<span class="literal">lt</span>;dataHost<span class="built_in"> name</span>=<span class="string">"localhost1"</span> writeType=<span class="string">"0"</span> switchType=<span class="string">"1"</span> slaveThreshold=<span class="string">"100"</span> balance=<span class="string">"1"</span> dbType=<span class="string">"mysql"</span> maxCon=<span class="string">"10"</span> minCon=<span class="string">"1"</span> dbDriver=<span class="string">"native"</span>&amp;<span class="literal">gt</span>;</span><br><span class="line">    &amp;<span class="literal">lt</span>;heartbeat&amp;<span class="literal">gt</span>;show status like <span class="string">'wsrep%'</span>&amp;<span class="literal">lt</span>;/heartbeat&amp;<span class="literal">gt</span>;</span><br><span class="line">    &amp;<span class="literal">lt</span>;writeHost host=<span class="string">"hostM1"</span> url=<span class="string">"127.0.0.1:3306"</span> user=<span class="string">"root"</span> password=<span class="string">"root"</span> &amp;<span class="literal">gt</span>;</span><br><span class="line">    &amp;<span class="literal">lt</span>;/writeHost&amp;<span class="literal">gt</span>;  </span><br><span class="line">  &amp;<span class="literal">lt</span>;/dataHost&amp;<span class="literal">gt</span>;</span><br><span class="line">&amp;<span class="literal">lt</span>;/mycat:schema &amp;<span class="literal">gt</span>;</span><br></pre></td></tr></table></figure>

<p>上面例子配置了一个逻辑库TESTDB，同时配置了t_user，ht_jy_login_log两个分片表。</p>
<h5 id="逻辑表配置"><a href="#逻辑表配置" class="headerlink" title="逻辑表配置"></a>逻辑表配置</h5><p><code>&amp;lt;table name=&quot;t_user&quot; dataNode=&quot;dn1,dn2&quot; rule=&quot;sharding-by-mod2&quot;/&amp;gt;</code></p>
<p>table 标签 是逻辑表的配置 其中  </p>
<p>name代表表名， </p>
<p>dataNode代表表对应的分片，  </p>
<p>Mycat默认采用分库方式，也就是一个表映射到不同的库上，  </p>
<p>rule代表表要采用的数据切分方式，名称对应到rule.xml中的对应配置，如果要分片必须配置。  </p>
<h5 id="配置分片（dataNode）"><a href="#配置分片（dataNode）" class="headerlink" title="配置分片（dataNode）"></a>配置分片（dataNode）</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&amp;lt;dataNode <span class="attribute">name</span>=<span class="string">"dn1"</span> <span class="attribute">dataHost</span>=<span class="string">"localhost1"</span> <span class="attribute">database</span>=<span class="string">"mycat_node1"</span>/&amp;gt;</span><br><span class="line">&amp;lt;dataNode <span class="attribute">name</span>=<span class="string">"dn2"</span> <span class="attribute">dataHost</span>=<span class="string">"localhost1"</span> <span class="attribute">database</span>=<span class="string">"mycat_node2"</span>/&amp;gt;</span><br></pre></td></tr></table></figure>

<p>表切分后需要配置映射到哪几个数据库中，Mycat的分片实际上就是库的别名，例如上面例子配置了两个分片dn1，dn2 分别对应到物理机映射dataHost localhost1 的两个库上。</p>
<h5 id="配置物理库分片映射（dataHost）"><a href="#配置物理库分片映射（dataHost）" class="headerlink" title="配置物理库分片映射（dataHost）"></a>配置物理库分片映射（dataHost）</h5><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&amp;<span class="literal">lt</span>;dataHost<span class="built_in"> name</span>=<span class="string">"localhost1"</span> writeType=<span class="string">"0"</span> switchType=<span class="string">"1"</span> slaveThreshold=<span class="string">"100"</span> balance=<span class="string">"1"</span> dbType=<span class="string">"mysql"</span> maxCon=<span class="string">"10"</span> minCon=<span class="string">"1"</span> dbDriver=<span class="string">"native"</span>&amp;<span class="literal">gt</span>;</span><br><span class="line">    &amp;<span class="literal">lt</span>;heartbeat&amp;<span class="literal">gt</span>;show status like <span class="string">'wsrep%'</span>&amp;<span class="literal">lt</span>;/heartbeat&amp;<span class="literal">gt</span>;</span><br><span class="line">    &amp;<span class="literal">lt</span>;writeHost host=<span class="string">"hostM1"</span> url=<span class="string">"127.0.0.1:3306"</span> user=<span class="string">"root"</span> password=<span class="string">"root"</span> &amp;<span class="literal">gt</span>;</span><br><span class="line">    &amp;<span class="literal">lt</span>;/writeHost&amp;<span class="literal">gt</span>;  </span><br><span class="line">  &amp;<span class="literal">lt</span>;/dataHost&amp;<span class="literal">gt</span>;</span><br></pre></td></tr></table></figure>

<p>Mycat作为数据库代理需要逻辑库，逻辑用户，表切分后需要配置分片，分片也就需要映射到真实的物理主机上，至于是映射到一台还是一台的多个实例上，Mycat并不关心，只需要配置好映射即可，例如例子中：</p>
<p>配置了一个名为localhost1的物理主机（dataHost）映射。</p>
<p>heartbeat 标签代表Mycat需要对物理库心跳检测的语句，正常情况下生产案例可能配置主从，或者多写 或者单库，无论哪种情况Mycat都需要维持到数据库的数据源连接，因此需要定时检查后端连接可以性，心跳语句就是来作为心跳检测。</p>
<p>writeHost 此标签代表 一个逻辑主机（dataHost）对应的后端的物理主机映射，例如例子中写库hostM1 映射到127.0.0.1:3306。如果后端需要做读写分离或者多写 或者主从则通过配置 多个writeHost 或者readHost即可。</p>
<p>dataHost 标签中的 writeType balance 等标签则是不同的策略，具体参考指南。<br>Mycat 表切分规则配置<br>表切分规则  </p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&amp;<span class="keyword">lt</span>;?<span class="keyword">xml</span> <span class="title">version</span>=<span class="string">"1.0"</span> <span class="attr">encoding=</span><span class="string">"UTF-8"</span>?&amp;<span class="keyword">gt</span>;</span><br><span class="line">&amp;<span class="keyword">lt</span>;!DOCTYPE mycat:<span class="keyword">rule</span> SYSTEM <span class="string">"rule.dtd"</span>&amp;<span class="keyword">gt</span>;</span><br><span class="line"></span><br><span class="line">&amp;<span class="keyword">lt</span>;mycat:<span class="keyword">rule</span>  xmlns:<span class="attr">mycat=</span><span class="string">"http://org.opencloudb/"</span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">  &amp;<span class="keyword">lt</span>;tableRule <span class="attr">name=</span><span class="string">"sharding-by-hour"</span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">    &amp;<span class="keyword">lt</span>;<span class="keyword">rule</span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">      &amp;<span class="keyword">lt</span>;columns&amp;<span class="keyword">gt</span>;createTime&amp;<span class="keyword">lt</span>;/columns&amp;<span class="keyword">gt</span>;</span><br><span class="line">      &amp;<span class="keyword">lt</span>;algorithm&amp;<span class="keyword">gt</span>;sharding-by-hour&amp;<span class="keyword">lt</span>;/algorithm&amp;<span class="keyword">gt</span>;</span><br><span class="line">    &amp;<span class="keyword">lt</span>;/<span class="keyword">rule</span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">  &amp;<span class="keyword">lt</span>;/tableRule&amp;<span class="keyword">gt</span>;</span><br><span class="line">  </span><br><span class="line">  &amp;<span class="keyword">lt</span>;function <span class="attr">name=</span><span class="string">"sharding-by-hour"</span> <span class="attr">class=</span><span class="string">"org.opencloudb.route.function.LatestMonthPartion"</span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">    &amp;<span class="keyword">lt</span>;<span class="keyword">property</span><span class="title"> </span><span class="attr">name=</span><span class="string">"splitOneDay"</span>&amp;<span class="keyword">gt</span>;<span class="number">24</span>&amp;<span class="keyword">lt</span>;/<span class="keyword">property</span><span class="title"></span>&amp;<span class="keyword">gt</span>;</span><br><span class="line">  &amp;<span class="keyword">lt</span>;/function&amp;<span class="keyword">gt</span>;</span><br><span class="line">   </span><br><span class="line">&amp;<span class="keyword">lt</span>;/mycat:<span class="keyword">rule</span> &amp;<span class="keyword">gt</span>;</span><br></pre></td></tr></table></figure>

<p>数据切分中作为表切分规则中最重要的配置，表的切分方式决定了数据切分后的性能好坏，因此也是最重要的配置。</p>
<p>如上面例子配置了一个切分规则，名为sharding-by-hour 对应的切分方式（function ）是按日期切分，该配置中：</p>
<p>tableRule<br>name 为schema.xml 中table 标签中对应的 rule=”sharding-by-hour” ,也就是配置表的分片规则，</p>
<p>columns 是表的切分字段： createTime 创建日期。</p>
<p>algorithm 是规则对应的切分规则：映射到function 的name。</p>
<p>function<br>function 配置是分片规则的配置。</p>
<p>name 为切分规则的名称，名字任意取，但是需要与tableRule 中匹配。</p>
<p>class 是切分规则对应的切分类，写死，需要哪种规则则配置哪种，例如本例子是按小时分片：org.opencloudb.route.function.LatestMonthPartion</p>
<p>property 标签是切分规则对应的不同属性，不同的切分规则配置不同。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="/blog/2019/09/23/mycat/" data-id="ckbdc9uzt00ni24u22milpw82" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JAVAEE/">JAVAEE</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MYCAT/">MYCAT</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/09/23/SessionAttributes/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          @SessionAttributes
        
      </div>
    </a>
  
  
    <a href="/2019/09/20/springboot配置mvc/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">springboot配置mvc和静态资源路径</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/GIT/">GIT</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IT/">IT</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVAEE/">JAVAEE</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JAVAEE/MYSQL/">MYSQL</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/OFFICE/">OFFICE</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SYSTEM/">SYSTEM</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/VIM/">VIM</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/分类1/">分类1</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/电商/">电商</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ANNOTATION/">ANNOTATION</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOP/">AOP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BAZEL/">BAZEL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BEANUTILS/">BEANUTILS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CENTOS/">CENTOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI-CD/">CI/CD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CLASSLOADER/">CLASSLOADER</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CRONTAB/">CRONTAB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DEBUG/">DEBUG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DESIGN-PATTERNS/">DESIGN PATTERNS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DNS/">DNS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOCKER/">DOCKER</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DRUID/">DRUID</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ENLINK/">ENLINK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES/">ES</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EUREKA/">EUREKA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EXCEL/">EXCEL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eureka/">Eureka</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FASTJSON/">FASTJSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GIT/">GIT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GITLAB/">GITLAB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GLOBALEXCEPTION/">GLOBALEXCEPTION</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GO/">GO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HEXO/">HEXO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDEA/">IDEA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/INTERCEPTOR/">INTERCEPTOR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IT/">IT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JAVADOC/">JAVADOC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JAVAEE/">JAVAEE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JAVASCRIPT/">JAVASCRIPT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JAVASE/">JAVASE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JETTY/">JETTY</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JPA/">JPA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSONUTILS/">JSONUTILS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KARAF/">KARAF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KEEPALIVED/">KEEPALIVED</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LINUX/">LINUX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LISTENER/">LISTENER</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LOADBALANCED/">LOADBALANCED</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LOG/">LOG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LOGBACK/">LOGBACK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LOGIN/">LOGIN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LOMBOK/">LOMBOK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MAC/">MAC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MARKDOWN/">MARKDOWN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MIME-TYPE/">MIME-TYPE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MQ/">MQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MYBATIS/">MYBATIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MYCAT/">MYCAT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MYSQL/">MYSQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NETWORK/">NETWORK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OAUTH2/">OAUTH2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ONOS/">ONOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSGI/">OSGI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSI/">OSI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PAGEHELPER/">PAGEHELPER</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/POSTMAN/">POSTMAN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PYTHON/">PYTHON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RABBITMQ/">RABBITMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/REDIS/">REDIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/REDISTEMPLATE/">REDISTEMPLATE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/REFLECTION/">REFLECTION</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/REGISTRY-CENTER/">REGISTRY CENTER</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/REPO/">REPO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RESTTEMPLATE/">RESTTEMPLATE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RIBBON/">RIBBON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RPM/">RPM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SECURITY/">SECURITY</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SERIALVERSIONUID/">SERIALVERSIONUID</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SERVLET/">SERVLET</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SESSION/">SESSION</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SHELL/">SHELL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPINTBOOT/">SPINTBOOT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPRING/">SPRING</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPRING-MVC/">SPRING MVC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPRING-STREAM/">SPRING STREAM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPRINGBBOT/">SPRINGBBOT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPRINGBOOT/">SPRINGBOOT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPRINGQUARTZ/">SPRINGQUARTZ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPRINGTASK/">SPRINGTASK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPRINGTBOOT/">SPRINGTBOOT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPTING/">SPTING</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/">SQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQLAlert/">SQLAlert</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSO/">SSO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STRINGREDISTEMPLATE/">STRINGREDISTEMPLATE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SWAGGER/">SWAGGER</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SYSTEM/">SYSTEM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/">TCP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-IP/">TCP/IP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TERMUX/">TERMUX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TK-MYBATIS/">TK.MYBATIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TRANSECTION/">TRANSECTION</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UBUNTU/">UBUNTU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UDP/">UDP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WEBClIENT/">WEBClIENT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/YAML/">YAML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rabbitMq/">rabbitMq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式/">分布式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/抖音/">抖音</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件服务器/">文件服务器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/时间转化/">时间转化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/标签1/">标签1</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/淘宝/">淘宝</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高可用/">高可用</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ANNOTATION/" style="font-size: 14.62px;">ANNOTATION</a> <a href="/tags/AOP/" style="font-size: 10.77px;">AOP</a> <a href="/tags/BAZEL/" style="font-size: 10px;">BAZEL</a> <a href="/tags/BEANUTILS/" style="font-size: 10px;">BEANUTILS</a> <a href="/tags/CENTOS/" style="font-size: 10px;">CENTOS</a> <a href="/tags/CI-CD/" style="font-size: 10px;">CI/CD</a> <a href="/tags/CLASSLOADER/" style="font-size: 10px;">CLASSLOADER</a> <a href="/tags/CRONTAB/" style="font-size: 10.77px;">CRONTAB</a> <a href="/tags/DEBUG/" style="font-size: 10px;">DEBUG</a> <a href="/tags/DESIGN-PATTERNS/" style="font-size: 10px;">DESIGN PATTERNS</a> <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/DOCKER/" style="font-size: 11.54px;">DOCKER</a> <a href="/tags/DRUID/" style="font-size: 10px;">DRUID</a> <a href="/tags/ENLINK/" style="font-size: 10px;">ENLINK</a> <a href="/tags/ES/" style="font-size: 16.15px;">ES</a> <a href="/tags/EUREKA/" style="font-size: 10px;">EUREKA</a> <a href="/tags/EXCEL/" style="font-size: 10px;">EXCEL</a> <a href="/tags/Eureka/" style="font-size: 10px;">Eureka</a> <a href="/tags/FASTJSON/" style="font-size: 10px;">FASTJSON</a> <a href="/tags/GIT/" style="font-size: 10px;">GIT</a> <a href="/tags/GITLAB/" style="font-size: 10px;">GITLAB</a> <a href="/tags/GLOBALEXCEPTION/" style="font-size: 10px;">GLOBALEXCEPTION</a> <a href="/tags/GO/" style="font-size: 10.77px;">GO</a> <a href="/tags/HEXO/" style="font-size: 12.31px;">HEXO</a> <a href="/tags/IDEA/" style="font-size: 12.31px;">IDEA</a> <a href="/tags/INTERCEPTOR/" style="font-size: 11.54px;">INTERCEPTOR</a> <a href="/tags/IT/" style="font-size: 11.54px;">IT</a> <a href="/tags/JAVADOC/" style="font-size: 10px;">JAVADOC</a> <a href="/tags/JAVAEE/" style="font-size: 20px;">JAVAEE</a> <a href="/tags/JAVASCRIPT/" style="font-size: 11.54px;">JAVASCRIPT</a> <a href="/tags/JAVASE/" style="font-size: 10.77px;">JAVASE</a> <a href="/tags/JETTY/" style="font-size: 10px;">JETTY</a> <a href="/tags/JPA/" style="font-size: 10.77px;">JPA</a> <a href="/tags/JSONUTILS/" style="font-size: 10px;">JSONUTILS</a> <a href="/tags/KARAF/" style="font-size: 11.54px;">KARAF</a> <a href="/tags/KEEPALIVED/" style="font-size: 10px;">KEEPALIVED</a> <a href="/tags/LINUX/" style="font-size: 16.92px;">LINUX</a> <a href="/tags/LISTENER/" style="font-size: 10px;">LISTENER</a> <a href="/tags/LOADBALANCED/" style="font-size: 10px;">LOADBALANCED</a> <a href="/tags/LOG/" style="font-size: 10px;">LOG</a> <a href="/tags/LOGBACK/" style="font-size: 10px;">LOGBACK</a> <a href="/tags/LOGIN/" style="font-size: 10px;">LOGIN</a> <a href="/tags/LOMBOK/" style="font-size: 11.54px;">LOMBOK</a> <a href="/tags/MAC/" style="font-size: 15.38px;">MAC</a> <a href="/tags/MARKDOWN/" style="font-size: 11.54px;">MARKDOWN</a> <a href="/tags/MIME-TYPE/" style="font-size: 10px;">MIME-TYPE</a> <a href="/tags/MQ/" style="font-size: 12.31px;">MQ</a> <a href="/tags/MYBATIS/" style="font-size: 17.69px;">MYBATIS</a> <a href="/tags/MYCAT/" style="font-size: 10.77px;">MYCAT</a> <a href="/tags/MYSQL/" style="font-size: 16.15px;">MYSQL</a> <a href="/tags/NETWORK/" style="font-size: 10px;">NETWORK</a> <a href="/tags/OAUTH2/" style="font-size: 10.77px;">OAUTH2</a> <a href="/tags/ONOS/" style="font-size: 14.62px;">ONOS</a> <a href="/tags/OSGI/" style="font-size: 13.85px;">OSGI</a> <a href="/tags/OSI/" style="font-size: 10px;">OSI</a> <a href="/tags/PAGEHELPER/" style="font-size: 10px;">PAGEHELPER</a> <a href="/tags/POSTMAN/" style="font-size: 10px;">POSTMAN</a> <a href="/tags/PYTHON/" style="font-size: 13.08px;">PYTHON</a> <a href="/tags/RABBITMQ/" style="font-size: 10.77px;">RABBITMQ</a> <a href="/tags/REDIS/" style="font-size: 11.54px;">REDIS</a> <a href="/tags/REDISTEMPLATE/" style="font-size: 10px;">REDISTEMPLATE</a> <a href="/tags/REFLECTION/" style="font-size: 11.54px;">REFLECTION</a> <a href="/tags/REGISTRY-CENTER/" style="font-size: 10px;">REGISTRY CENTER</a> <a href="/tags/REPO/" style="font-size: 10px;">REPO</a> <a href="/tags/RESTTEMPLATE/" style="font-size: 10px;">RESTTEMPLATE</a> <a href="/tags/RIBBON/" style="font-size: 10.77px;">RIBBON</a> <a href="/tags/RPM/" style="font-size: 10px;">RPM</a> <a href="/tags/SECURITY/" style="font-size: 12.31px;">SECURITY</a> <a href="/tags/SERIALVERSIONUID/" style="font-size: 10px;">SERIALVERSIONUID</a> <a href="/tags/SERVLET/" style="font-size: 10.77px;">SERVLET</a> <a href="/tags/SESSION/" style="font-size: 12.31px;">SESSION</a> <a href="/tags/SHELL/" style="font-size: 14.62px;">SHELL</a> <a href="/tags/SPINTBOOT/" style="font-size: 10px;">SPINTBOOT</a> <a href="/tags/SPRING/" style="font-size: 13.08px;">SPRING</a> <a href="/tags/SPRING-MVC/" style="font-size: 10px;">SPRING MVC</a> <a href="/tags/SPRING-STREAM/" style="font-size: 10px;">SPRING STREAM</a> <a href="/tags/SPRINGBBOT/" style="font-size: 10px;">SPRINGBBOT</a> <a href="/tags/SPRINGBOOT/" style="font-size: 19.23px;">SPRINGBOOT</a> <a href="/tags/SPRINGQUARTZ/" style="font-size: 10px;">SPRINGQUARTZ</a> <a href="/tags/SPRINGTASK/" style="font-size: 12.31px;">SPRINGTASK</a> <a href="/tags/SPRINGTBOOT/" style="font-size: 10px;">SPRINGTBOOT</a> <a href="/tags/SPTING/" style="font-size: 10px;">SPTING</a> <a href="/tags/SQL/" style="font-size: 12.31px;">SQL</a> <a href="/tags/SQLAlert/" style="font-size: 18.46px;">SQLAlert</a> <a href="/tags/SSO/" style="font-size: 10px;">SSO</a> <a href="/tags/STRINGREDISTEMPLATE/" style="font-size: 10px;">STRINGREDISTEMPLATE</a> <a href="/tags/SWAGGER/" style="font-size: 10px;">SWAGGER</a> <a href="/tags/SYSTEM/" style="font-size: 10px;">SYSTEM</a> <a href="/tags/TCP/" style="font-size: 10px;">TCP</a> <a href="/tags/TCP-IP/" style="font-size: 11.54px;">TCP/IP</a> <a href="/tags/TERMUX/" style="font-size: 10.77px;">TERMUX</a> <a href="/tags/TK-MYBATIS/" style="font-size: 10px;">TK.MYBATIS</a> <a href="/tags/TRANSECTION/" style="font-size: 10px;">TRANSECTION</a> <a href="/tags/UBUNTU/" style="font-size: 10px;">UBUNTU</a> <a href="/tags/UDP/" style="font-size: 10px;">UDP</a> <a href="/tags/WEBClIENT/" style="font-size: 10px;">WEBClIENT</a> <a href="/tags/YAML/" style="font-size: 10.77px;">YAML</a> <a href="/tags/rabbitMq/" style="font-size: 10px;">rabbitMq</a> <a href="/tags/分布式/" style="font-size: 10px;">分布式</a> <a href="/tags/抖音/" style="font-size: 10px;">抖音</a> <a href="/tags/文件服务器/" style="font-size: 10.77px;">文件服务器</a> <a href="/tags/时间转化/" style="font-size: 10px;">时间转化</a> <a href="/tags/标签1/" style="font-size: 10px;">标签1</a> <a href="/tags/淘宝/" style="font-size: 10px;">淘宝</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/高可用/" style="font-size: 10px;">高可用</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/06/13/可视化面板/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/06/13/邮箱找回密码与二次认证/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/06/13/特权用户访问策略控制/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/06/13/md列表/">markdown任务列表语法checkbox</a>
          </li>
        
          <li>
            <a href="/2020/06/13/CS应用配置/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Joe Tong<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>