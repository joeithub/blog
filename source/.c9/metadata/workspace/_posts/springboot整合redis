{"filter":false,"title":"springboot整合redis","tooltip":"/_posts/springboot整合redis","undoManager":{"mark":57,"position":57,"stack":[[{"start":{"row":0,"column":0},"end":{"row":6,"column":56},"action":"insert","lines":["SpringBoot整合Redis","","偷懒了几天，好几天没写springboot了。真的不是没什么可写，是因为坚持做一件事真的很难。","","今天抽空弄了一个springboot整合redis的小例子。","","首先做好准备工作，在本地安装一个redis，具体步骤可以自行百度，然后启动redis。出现下图页面就启动成功了。"],"id":1}],[{"start":{"row":2,"column":0},"end":{"row":4,"column":30},"action":"remove","lines":["偷懒了几天，好几天没写springboot了。真的不是没什么可写，是因为坚持做一件事真的很难。","","今天抽空弄了一个springboot整合redis的小例子。"],"id":2},{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"remove","lines":["",""],"id":3}],[{"start":{"row":2,"column":22},"end":{"row":2,"column":33},"action":"remove","lines":["具体步骤可以自行百度，"],"id":4}],[{"start":{"row":2,"column":45},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":5}],[{"start":{"row":3,"column":0},"end":{"row":3,"column":25},"action":"insert","lines":["然后新建项目，加入redis依赖，pom文件如下："],"id":6}],[{"start":{"row":3,"column":25},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":7},{"start":{"row":4,"column":0},"end":{"row":5,"column":0},"action":"insert","lines":["",""]},{"start":{"row":5,"column":0},"end":{"row":5,"column":1},"action":"insert","lines":["`"]},{"start":{"row":5,"column":1},"end":{"row":5,"column":2},"action":"insert","lines":["`"]},{"start":{"row":5,"column":2},"end":{"row":5,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":5,"column":3},"end":{"row":6,"column":0},"action":"insert","lines":["",""],"id":8}],[{"start":{"row":6,"column":0},"end":{"row":70,"column":34},"action":"insert","lines":["<?xml version=\"1.0\" encoding=\"UTF-8\"?>","<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"","\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">","\t<modelVersion>4.0.0</modelVersion>","","\t<groupId>com.dalaoyang</groupId>","\t<artifactId>springboot_redis</artifactId>","\t<version>0.0.1-SNAPSHOT</version>","\t<packaging>jar</packaging>","","\t<name>springboot_redis</name>","\t<description>springboot_redis</description>","","\t<parent>","\t\t<groupId>org.springframework.boot</groupId>","\t\t<artifactId>spring-boot-starter-parent</artifactId>","\t\t<version>1.5.9.RELEASE</version>","\t\t<relativePath/> <!-- lookup parent from repository -->","\t</parent>","","\t<properties>","\t\t<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>","\t\t<project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>","\t\t<java.version>1.8</java.version>","\t</properties>","","\t<dependencies>","\t\t<dependency>","\t\t\t<groupId>org.springframework.boot</groupId>","\t\t\t<artifactId>spring-boot-starter-data-redis</artifactId>","\t\t</dependency>","\t\t<dependency>","\t\t\t<groupId>org.springframework.boot</groupId>","\t\t\t<artifactId>spring-boot-starter-web</artifactId>","\t\t</dependency>","","\t\t<dependency>","\t\t\t<groupId>org.springframework.boot</groupId>","\t\t\t<artifactId>spring-boot-devtools</artifactId>","\t\t\t<scope>runtime</scope>","\t\t</dependency>","\t\t<dependency>","\t\t\t<groupId>org.springframework.boot</groupId>","\t\t\t<artifactId>spring-boot-starter-test</artifactId>","\t\t\t<scope>test</scope>","\t\t</dependency>","","\t</dependencies>","","\t<build>","\t\t<plugins>","\t\t\t<plugin>","\t\t\t\t<groupId>org.springframework.boot</groupId>","\t\t\t\t<artifactId>spring-boot-maven-plugin</artifactId>","\t\t\t</plugin>","\t\t</plugins>","\t</build>","","","</project>","","作者：dalaoyang","链接：https://juejin.im/post/5ad6acb4f265da239e4e9906","来源：掘金","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],"id":9}],[{"start":{"row":67,"column":0},"end":{"row":70,"column":34},"action":"remove","lines":["作者：dalaoyang","链接：https://juejin.im/post/5ad6acb4f265da239e4e9906","来源：掘金","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],"id":10},{"start":{"row":67,"column":0},"end":{"row":67,"column":1},"action":"insert","lines":["`"]},{"start":{"row":67,"column":1},"end":{"row":67,"column":2},"action":"insert","lines":["`"]},{"start":{"row":67,"column":2},"end":{"row":67,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":5,"column":3},"end":{"row":6,"column":0},"action":"insert","lines":["",""],"id":11}],[{"start":{"row":68,"column":3},"end":{"row":69,"column":0},"action":"insert","lines":["",""],"id":12},{"start":{"row":69,"column":0},"end":{"row":70,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":70,"column":0},"end":{"row":70,"column":35},"action":"insert","lines":["然后在application.properties加入redis配置："],"id":13}],[{"start":{"row":70,"column":35},"end":{"row":71,"column":0},"action":"insert","lines":["",""],"id":14},{"start":{"row":71,"column":0},"end":{"row":71,"column":1},"action":"insert","lines":["·"]},{"start":{"row":71,"column":1},"end":{"row":71,"column":2},"action":"insert","lines":["·"]}],[{"start":{"row":71,"column":1},"end":{"row":71,"column":2},"action":"remove","lines":["·"],"id":15},{"start":{"row":71,"column":0},"end":{"row":71,"column":1},"action":"remove","lines":["·"]}],[{"start":{"row":71,"column":0},"end":{"row":71,"column":1},"action":"insert","lines":["`"],"id":16},{"start":{"row":71,"column":1},"end":{"row":71,"column":2},"action":"insert","lines":["`"]},{"start":{"row":71,"column":2},"end":{"row":71,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":71,"column":3},"end":{"row":72,"column":0},"action":"insert","lines":["",""],"id":17}],[{"start":{"row":72,"column":0},"end":{"row":98,"column":34},"action":"insert","lines":["##端口号","server.port=8888","","# Redis数据库索引（默认为0）","spring.redis.database=0 ","# Redis服务器地址","spring.redis.host=localhost","# Redis服务器连接端口","spring.redis.port=6379 ","# Redis服务器连接密码（默认为空）","spring.redis.password=","#连接池最大连接数（使用负值表示没有限制）","spring.redis.pool.max-active=8 ","# 连接池最大阻塞等待时间（使用负值表示没有限制）","spring.redis.pool.max-wait=-1 ","# 连接池中的最大空闲连接","spring.redis.pool.max-idle=8 ","# 连接池中的最小空闲连接","spring.redis.pool.min-idle=0 ","# 连接超时时间（毫秒）","spring.redis.timeout=0","","","作者：dalaoyang","链接：https://juejin.im/post/5ad6acb4f265da239e4e9906","来源：掘金","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],"id":18}],[{"start":{"row":95,"column":0},"end":{"row":98,"column":34},"action":"remove","lines":["作者：dalaoyang","链接：https://juejin.im/post/5ad6acb4f265da239e4e9906","来源：掘金","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],"id":19},{"start":{"row":95,"column":0},"end":{"row":95,"column":1},"action":"insert","lines":["`"]},{"start":{"row":95,"column":1},"end":{"row":95,"column":2},"action":"insert","lines":["`"]},{"start":{"row":95,"column":2},"end":{"row":95,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":70,"column":35},"end":{"row":71,"column":0},"action":"insert","lines":["",""],"id":20}],[{"start":{"row":94,"column":0},"end":{"row":95,"column":0},"action":"remove","lines":["",""],"id":21},{"start":{"row":93,"column":22},"end":{"row":94,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":74,"column":16},"end":{"row":75,"column":0},"action":"remove","lines":["",""],"id":22}],[{"start":{"row":72,"column":3},"end":{"row":73,"column":0},"action":"insert","lines":["",""],"id":23}],[{"start":{"row":93,"column":22},"end":{"row":94,"column":0},"action":"insert","lines":["",""],"id":24}],[{"start":{"row":95,"column":3},"end":{"row":96,"column":0},"action":"insert","lines":["",""],"id":25},{"start":{"row":96,"column":0},"end":{"row":97,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":97,"column":0},"end":{"row":97,"column":35},"action":"insert","lines":["RedisConfig配置类，其中@EnableCaching开启注解"],"id":26}],[{"start":{"row":97,"column":35},"end":{"row":98,"column":0},"action":"insert","lines":["",""],"id":27},{"start":{"row":98,"column":0},"end":{"row":99,"column":0},"action":"insert","lines":["",""]},{"start":{"row":99,"column":0},"end":{"row":99,"column":1},"action":"insert","lines":["`"]},{"start":{"row":99,"column":1},"end":{"row":99,"column":2},"action":"insert","lines":["`"]},{"start":{"row":99,"column":2},"end":{"row":99,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":99,"column":3},"end":{"row":100,"column":0},"action":"insert","lines":["",""],"id":28}],[{"start":{"row":100,"column":0},"end":{"row":141,"column":34},"action":"insert","lines":["package com.dalaoyang.config;","","import org.springframework.cache.CacheManager;","import org.springframework.cache.annotation.CachingConfigurerSupport;","import org.springframework.cache.annotation.EnableCaching;","import org.springframework.context.annotation.Bean;","import org.springframework.context.annotation.Configuration;","import org.springframework.data.redis.cache.RedisCacheManager;","import org.springframework.data.redis.connection.RedisConnectionFactory;","import org.springframework.data.redis.core.RedisTemplate;","","/**"," * @author dalaoyang"," * @Description"," * @project springboot_learn"," * @package com.dalaoyang.config"," * @email yangyang@dalaoyang.cn"," * @date 2018/4/18"," */","@Configuration","@EnableCaching//开启缓存","public class RedisConfig extends CachingConfigurerSupport {","","    @Bean","    public CacheManager cacheManager(RedisTemplate<?,?> redisTemplate) {","        CacheManager cacheManager = new RedisCacheManager(redisTemplate);","        return cacheManager;","    }","","    @Bean","    public RedisTemplate<String, String> redisTemplate(RedisConnectionFactory factory) {","        RedisTemplate<String, String> redisTemplate = new RedisTemplate<String, String>();","        redisTemplate.setConnectionFactory(factory);","        return redisTemplate;","    }","}","","","作者：dalaoyang","链接：https://juejin.im/post/5ad6acb4f265da239e4e9906","来源：掘金","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],"id":29}],[{"start":{"row":138,"column":0},"end":{"row":141,"column":34},"action":"remove","lines":["作者：dalaoyang","链接：https://juejin.im/post/5ad6acb4f265da239e4e9906","来源：掘金","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],"id":30},{"start":{"row":138,"column":0},"end":{"row":138,"column":1},"action":"insert","lines":["`"]},{"start":{"row":138,"column":1},"end":{"row":138,"column":2},"action":"insert","lines":["`"]},{"start":{"row":138,"column":2},"end":{"row":138,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":138,"column":3},"end":{"row":139,"column":0},"action":"insert","lines":["",""],"id":31},{"start":{"row":139,"column":0},"end":{"row":140,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":140,"column":0},"end":{"row":140,"column":73},"action":"insert","lines":["由于只是简单整合，我只创建了一个RedisService来用来存取缓存数据，实际项目中可以根据需求创建interface，impl等等，代码如下："],"id":32}],[{"start":{"row":140,"column":73},"end":{"row":141,"column":0},"action":"insert","lines":["",""],"id":33},{"start":{"row":141,"column":0},"end":{"row":142,"column":0},"action":"insert","lines":["",""]},{"start":{"row":142,"column":0},"end":{"row":143,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":143,"column":0},"end":{"row":182,"column":34},"action":"insert","lines":["package com.dalaoyang.service;","import javax.annotation.Resource;","","import org.springframework.data.redis.core.RedisTemplate;","import org.springframework.data.redis.core.ValueOperations;","import org.springframework.data.redis.serializer.RedisSerializer;","import org.springframework.data.redis.serializer.StringRedisSerializer;","import org.springframework.stereotype.Service;","","/**"," * @author dalaoyang"," * @Description"," * @project springboot_learn"," * @package com.dalaoyang.service"," * @email yangyang@dalaoyang.cn"," * @date 2018/4/18"," */","@Service","public class RedisService {","    @Resource","    private RedisTemplate<String,Object> redisTemplate;","","    public void set(String key, Object value) {","        //更改在redis里面查看key编码问题","        RedisSerializer redisSerializer =new StringRedisSerializer();","        redisTemplate.setKeySerializer(redisSerializer);","        ValueOperations<String,Object> vo = redisTemplate.opsForValue();","        vo.set(key, value);","    }","","    public Object get(String key) {","        ValueOperations<String,Object> vo = redisTemplate.opsForValue();","        return vo.get(key);","    }","}","","作者：dalaoyang","链接：https://juejin.im/post/5ad6acb4f265da239e4e9906","来源：掘金","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],"id":34}],[{"start":{"row":178,"column":0},"end":{"row":182,"column":34},"action":"remove","lines":["","作者：dalaoyang","链接：https://juejin.im/post/5ad6acb4f265da239e4e9906","来源：掘金","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],"id":35}],[{"start":{"row":142,"column":0},"end":{"row":142,"column":1},"action":"insert","lines":["`"],"id":36},{"start":{"row":142,"column":1},"end":{"row":142,"column":2},"action":"insert","lines":["`"]},{"start":{"row":142,"column":2},"end":{"row":142,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":178,"column":0},"end":{"row":178,"column":1},"action":"insert","lines":["`"],"id":37},{"start":{"row":178,"column":1},"end":{"row":178,"column":2},"action":"insert","lines":["`"]},{"start":{"row":178,"column":2},"end":{"row":178,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":142,"column":0},"end":{"row":143,"column":0},"action":"insert","lines":["",""],"id":38}],[{"start":{"row":178,"column":1},"end":{"row":179,"column":0},"action":"insert","lines":["",""],"id":39}],[{"start":{"row":141,"column":0},"end":{"row":142,"column":0},"action":"remove","lines":["",""],"id":40}],[{"start":{"row":179,"column":3},"end":{"row":180,"column":0},"action":"insert","lines":["",""],"id":41},{"start":{"row":180,"column":0},"end":{"row":181,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":181,"column":0},"end":{"row":181,"column":8},"action":"insert","lines":["实体类City："],"id":42}],[{"start":{"row":181,"column":8},"end":{"row":182,"column":0},"action":"insert","lines":["",""],"id":43},{"start":{"row":182,"column":0},"end":{"row":182,"column":1},"action":"insert","lines":["`"]},{"start":{"row":182,"column":1},"end":{"row":182,"column":2},"action":"insert","lines":["`"]},{"start":{"row":182,"column":2},"end":{"row":182,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":182,"column":3},"end":{"row":183,"column":0},"action":"insert","lines":["",""],"id":44},{"start":{"row":183,"column":0},"end":{"row":183,"column":1},"action":"insert","lines":["`"]},{"start":{"row":183,"column":1},"end":{"row":183,"column":2},"action":"insert","lines":["`"]},{"start":{"row":183,"column":2},"end":{"row":183,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":182,"column":3},"end":{"row":183,"column":0},"action":"insert","lines":["",""],"id":45}],[{"start":{"row":183,"column":0},"end":{"row":243,"column":34},"action":"insert","lines":["package com.dalaoyang.entity;","","import java.io.Serializable;","","/**"," * @author dalaoyang"," * @Description"," * @project springboot_learn"," * @package com.dalaoyang.Entity"," * @email 397600342@qq.com"," * @date 2018/4/7"," */","public class City implements Serializable {","    private int cityId;","    private String cityName;","    private String cityIntroduce;","","    public City(int cityId, String cityName, String cityIntroduce) {","        this.cityId = cityId;","        this.cityName = cityName;","        this.cityIntroduce = cityIntroduce;","    }","","    public City(String cityName, String cityIntroduce) {","        this.cityName = cityName;","        this.cityIntroduce = cityIntroduce;","    }","","    public City() {","    }","","    public int getCityId() {","        return cityId;","    }","","    public void setCityId(int cityId) {","        this.cityId = cityId;","    }","","    public String getCityName() {","        return cityName;","    }","","    public void setCityName(String cityName) {","        this.cityName = cityName;","    }","","    public String getCityIntroduce() {","        return cityIntroduce;","    }","","    public void setCityIntroduce(String cityIntroduce) {","        this.cityIntroduce = cityIntroduce;","    }","}","复制代码","","作者：dalaoyang","链接：https://juejin.im/post/5ad6acb4f265da239e4e9906","来源：掘金","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],"id":46}],[{"start":{"row":238,"column":0},"end":{"row":243,"column":33},"action":"remove","lines":["复制代码","","作者：dalaoyang","链接：https://juejin.im/post/5ad6acb4f265da239e4e9906","来源：掘金","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处"],"id":47},{"start":{"row":237,"column":1},"end":{"row":238,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":237,"column":1},"end":{"row":237,"column":2},"action":"remove","lines":["。"],"id":48}],[{"start":{"row":237,"column":1},"end":{"row":238,"column":0},"action":"insert","lines":["",""],"id":49}],[{"start":{"row":239,"column":3},"end":{"row":240,"column":0},"action":"insert","lines":["",""],"id":50},{"start":{"row":240,"column":0},"end":{"row":241,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":241,"column":0},"end":{"row":241,"column":17},"action":"insert","lines":["测试类CityController"],"id":51}],[{"start":{"row":241,"column":17},"end":{"row":242,"column":0},"action":"insert","lines":["",""],"id":52}],[{"start":{"row":242,"column":0},"end":{"row":286,"column":34},"action":"insert","lines":["package com.dalaoyang.controller;","","import com.dalaoyang.entity.City;","import com.dalaoyang.service.RedisService;","import org.springframework.beans.factory.annotation.Autowired;","import org.springframework.web.bind.annotation.GetMapping;","import org.springframework.web.bind.annotation.RestController;","","/**"," * @author dalaoyang"," * @Description"," * @project springboot_learn"," * @package com.dalaoyang.controller"," * @email 397600342@qq.com"," * @date 2018/4/7"," */","@RestController","public class CityController {","","    @Autowired","    private RedisService redisService;","","","    //http://localhost:8888/saveCity?cityName=北京&cityIntroduce=中国首都&cityId=1","    @GetMapping(value = \"saveCity\")","    public String saveCity(int cityId,String cityName,String cityIntroduce){","        City city = new City(cityId,cityName,cityIntroduce);","        redisService.set(cityId+\"\",city);","        return \"success\";","    }","","","","    //http://localhost:8888/getCityById?cityId=1","    @GetMapping(value = \"getCityById\")","    public City getCity(int cityId){","        City city = (City) redisService.get(cityId+\"\");","        return city;","    }","}","","作者：dalaoyang","链接：https://juejin.im/post/5ad6acb4f265da239e4e9906","来源：掘金","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],"id":53}],[{"start":{"row":283,"column":0},"end":{"row":286,"column":34},"action":"remove","lines":["作者：dalaoyang","链接：https://juejin.im/post/5ad6acb4f265da239e4e9906","来源：掘金","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],"id":54},{"start":{"row":282,"column":0},"end":{"row":283,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":282,"column":0},"end":{"row":282,"column":1},"action":"insert","lines":["`"],"id":55},{"start":{"row":282,"column":1},"end":{"row":282,"column":2},"action":"insert","lines":["`"]},{"start":{"row":282,"column":2},"end":{"row":282,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":281,"column":1},"end":{"row":282,"column":0},"action":"insert","lines":["",""],"id":56}],[{"start":{"row":283,"column":3},"end":{"row":284,"column":0},"action":"insert","lines":["",""],"id":57},{"start":{"row":284,"column":0},"end":{"row":285,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":285,"column":0},"end":{"row":285,"column":92},"action":"insert","lines":["到这里配置基本上都完成了，然后启动项目访问http://localhost:8888/saveCity?cityName=北京&cityIntroduce=中国首都&cityId=18"],"id":58}]]},"ace":{"folds":[],"scrolltop":5134,"scrollleft":0,"selection":{"start":{"row":280,"column":5},"end":{"row":280,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1566822630929,"hash":"bebbe4064d05c7bf20795143834242eef8ff82f0"}