{"filter":false,"title":"onos开发教程.md","tooltip":"/_posts/onos开发教程.md","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":175,"column":0},"end":{"row":175,"column":1},"action":"insert","lines":["`"],"id":111},{"start":{"row":175,"column":1},"end":{"row":175,"column":2},"action":"insert","lines":["`"]},{"start":{"row":175,"column":2},"end":{"row":175,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":177,"column":71},"end":{"row":178,"column":0},"action":"insert","lines":["",""],"id":112},{"start":{"row":178,"column":0},"end":{"row":178,"column":1},"action":"insert","lines":["`"]},{"start":{"row":178,"column":1},"end":{"row":178,"column":2},"action":"insert","lines":["`"]},{"start":{"row":178,"column":2},"end":{"row":178,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":179,"column":0},"end":{"row":179,"column":1},"action":"insert","lines":["<"],"id":113},{"start":{"row":179,"column":1},"end":{"row":179,"column":2},"action":"insert","lines":[">"]}],[{"start":{"row":179,"column":1},"end":{"row":179,"column":2},"action":"insert","lines":["h"],"id":114},{"start":{"row":179,"column":2},"end":{"row":179,"column":3},"action":"insert","lines":["r"]},{"start":{"row":179,"column":3},"end":{"row":179,"column":4},"action":"insert","lines":["/"]}],[{"start":{"row":179,"column":5},"end":{"row":180,"column":0},"action":"insert","lines":["",""],"id":115},{"start":{"row":180,"column":0},"end":{"row":181,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":181,"column":0},"end":{"row":242,"column":0},"action":"insert","lines":["","转至元数据结尾","由Brian O'Connor创建于2015年5月27日 转至元数据起始"," ","","第1步：增加VMDK大小","使用虚拟盒子","使用VMWare","第2步：增加分区大小","第3步：增加文件系统大小","第1步：增加VMDK大小","使用虚拟盒子","不幸的是，Virtual Box无法调整VMDK的大小，但它可以调整VDI图像的大小。因此，我们将磁盘转换为VDI，然后增加其大小。","","关闭VM。","找到VMDK的位置（例如  / Users / <user> / VirtualBox VMs / <VM Name> /）","","$ cd \"~/VirtualBox VMs/<VM Name>/\"","使用VBoxManage克隆图像并调整其大小。","","$ VBoxManage clonehd <VMDK Name>.vmdk clone.vdi --format vdi<font></font>","$ VBoxManage modifyhd clone.vdi --resize 20480 #size in MB (20 GB)","更新VirtualBox以使用新映像。这可以使用命令行完成，但使用GUI更容易。选择VM，然后单击“  设置”  按钮。导航到存储选项卡，单击旧虚拟磁盘，然后单击底部的小减号以删除驱动器。然后，单击SCSI控制器上带加号的小硬盘驱动器以添加新磁盘。选择选择现有磁盘，然后选择clone.vdi。","使用VMWare","在VMWare中增加VMDK的大小非常容易。首先，关闭VM并打开  VM Settings Panel。单击“  硬盘”  图标，然后输入新的磁盘大小。","","第2步：增加分区大小","有些人可能会考虑以下“危险”。但是，如果使用上面的VirtualBox方法，则已经备份了虚拟磁盘。如果您想“更安全”，请找到LiveCD或GParted ISO，并在卸载/ dev / sda1的情况下执行以下步骤。 ","","但是，没有进一步的ado：","","使用新的或放大的虚拟磁盘启动VM。","关闭交换 ","","$ sudo swapoff /dev/sda5<font></font>","$ sudo sed -i 's/\\(^.*swap.*$\\)/#\\1/' /etc/fstab","删除交换分区（/ dev / sda5）和扩展分区（/ dev / sda2），然后调整（删除并重新创建）根分区（/ dev / sda1）","","$ sudo fdisk /dev/sda<font></font>","Command: d<font></font>","Partition number: 5<font></font>","Command: d<font></font>","Partition number: 2<font></font>","Command: d<font></font>","Command: n<font></font>","Select: p<font></font>","Partition number: 1<font></font>","First sector: 2048<font></font>","Last sector: <enter to take default, which is the end of the disk><font></font>","Command: w","更改将在重新启动后生效。我们也想在重启时做fsck。","","$ sudo touch /forcefsck<font></font>","$ sudo reboot","第3步：增加文件系统大小","您需要做的就是执行以下操作：","","$ sudo resize2fs /dev/sda1","您可以通过以下方式验证您的辛勤工","","$ df -h",""],"id":116}],[{"start":{"row":182,"column":0},"end":{"row":183,"column":36},"action":"remove","lines":["转至元数据结尾","由Brian O'Connor创建于2015年5月27日 转至元数据起始"],"id":117},{"start":{"row":181,"column":0},"end":{"row":182,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":181,"column":0},"end":{"row":183,"column":0},"action":"insert","lines":["增加VM磁盘空间","转至元数据结尾",""],"id":118}],[{"start":{"row":182,"column":0},"end":{"row":182,"column":7},"action":"remove","lines":["转至元数据结尾"],"id":119},{"start":{"row":181,"column":8},"end":{"row":182,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":181,"column":0},"end":{"row":181,"column":1},"action":"insert","lines":["#"],"id":120},{"start":{"row":181,"column":1},"end":{"row":181,"column":2},"action":"insert","lines":["#"]},{"start":{"row":181,"column":2},"end":{"row":181,"column":3},"action":"insert","lines":["#"]}],[{"start":{"row":181,"column":3},"end":{"row":181,"column":4},"action":"insert","lines":[" "],"id":121}],[{"start":{"row":183,"column":1},"end":{"row":184,"column":0},"action":"remove","lines":["",""],"id":122},{"start":{"row":183,"column":0},"end":{"row":183,"column":1},"action":"remove","lines":[" "]},{"start":{"row":182,"column":0},"end":{"row":183,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":195,"column":0},"end":{"row":195,"column":1},"action":"insert","lines":["`"],"id":123}],[{"start":{"row":195,"column":35},"end":{"row":195,"column":36},"action":"insert","lines":["`"],"id":124}],[{"start":{"row":195,"column":36},"end":{"row":195,"column":37},"action":"insert","lines":[" "],"id":125},{"start":{"row":195,"column":37},"end":{"row":195,"column":38},"action":"insert","lines":[" "]}],[{"start":{"row":196,"column":23},"end":{"row":196,"column":24},"action":"insert","lines":[" "],"id":126},{"start":{"row":196,"column":24},"end":{"row":196,"column":25},"action":"insert","lines":[" "]}],[{"start":{"row":193,"column":62},"end":{"row":193,"column":63},"action":"insert","lines":[" "],"id":127},{"start":{"row":193,"column":63},"end":{"row":193,"column":64},"action":"insert","lines":[" "]}],[{"start":{"row":192,"column":5},"end":{"row":192,"column":6},"action":"insert","lines":[" "],"id":128},{"start":{"row":192,"column":6},"end":{"row":192,"column":7},"action":"insert","lines":[" "]},{"start":{"row":192,"column":7},"end":{"row":192,"column":8},"action":"insert","lines":[" "]}],[{"start":{"row":197,"column":0},"end":{"row":197,"column":1},"action":"insert","lines":["`"],"id":129},{"start":{"row":197,"column":1},"end":{"row":197,"column":2},"action":"insert","lines":["`"]},{"start":{"row":197,"column":2},"end":{"row":197,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":199,"column":66},"end":{"row":200,"column":0},"action":"insert","lines":["",""],"id":130},{"start":{"row":200,"column":0},"end":{"row":200,"column":1},"action":"insert","lines":["`"]},{"start":{"row":200,"column":1},"end":{"row":200,"column":2},"action":"insert","lines":["`"]},{"start":{"row":200,"column":2},"end":{"row":200,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":200,"column":3},"end":{"row":201,"column":0},"action":"insert","lines":["",""],"id":131}],[{"start":{"row":206,"column":10},"end":{"row":206,"column":11},"action":"insert","lines":[" "],"id":132},{"start":{"row":206,"column":11},"end":{"row":206,"column":12},"action":"insert","lines":[" "]}],[{"start":{"row":213,"column":0},"end":{"row":213,"column":1},"action":"insert","lines":["`"],"id":133},{"start":{"row":213,"column":1},"end":{"row":213,"column":2},"action":"insert","lines":["`"]},{"start":{"row":213,"column":2},"end":{"row":213,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":215,"column":48},"end":{"row":216,"column":0},"action":"insert","lines":["",""],"id":134},{"start":{"row":216,"column":0},"end":{"row":216,"column":1},"action":"insert","lines":["`"]},{"start":{"row":216,"column":1},"end":{"row":216,"column":2},"action":"insert","lines":["`"]},{"start":{"row":216,"column":2},"end":{"row":216,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":218,"column":0},"end":{"row":218,"column":1},"action":"insert","lines":["`"],"id":135},{"start":{"row":218,"column":1},"end":{"row":218,"column":2},"action":"insert","lines":["`"]},{"start":{"row":218,"column":2},"end":{"row":218,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":230,"column":10},"end":{"row":231,"column":0},"action":"insert","lines":["",""],"id":136},{"start":{"row":231,"column":0},"end":{"row":231,"column":1},"action":"insert","lines":["`"]},{"start":{"row":231,"column":1},"end":{"row":231,"column":2},"action":"insert","lines":["`"]},{"start":{"row":231,"column":2},"end":{"row":231,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":228,"column":18},"end":{"row":228,"column":31},"action":"remove","lines":["<font></font>"],"id":137}],[{"start":{"row":38,"column":31},"end":{"row":38,"column":44},"action":"remove","lines":["<font></font>"],"id":139},{"start":{"row":39,"column":6},"end":{"row":39,"column":19},"action":"remove","lines":["<font></font>"]},{"start":{"row":40,"column":79},"end":{"row":40,"column":92},"action":"remove","lines":["<font></font>"]},{"start":{"row":41,"column":45},"end":{"row":41,"column":58},"action":"remove","lines":["<font></font>"]},{"start":{"row":42,"column":79},"end":{"row":42,"column":92},"action":"remove","lines":["<font></font>"]},{"start":{"row":43,"column":6},"end":{"row":43,"column":19},"action":"remove","lines":["<font></font>"]},{"start":{"row":44,"column":102},"end":{"row":44,"column":115},"action":"remove","lines":["<font></font>"]},{"start":{"row":45,"column":6},"end":{"row":45,"column":19},"action":"remove","lines":["<font></font>"]},{"start":{"row":46,"column":102},"end":{"row":46,"column":115},"action":"remove","lines":["<font></font>"]},{"start":{"row":47,"column":6},"end":{"row":47,"column":19},"action":"remove","lines":["<font></font>"]},{"start":{"row":48,"column":83},"end":{"row":48,"column":96},"action":"remove","lines":["<font></font>"]},{"start":{"row":49,"column":45},"end":{"row":49,"column":58},"action":"remove","lines":["<font></font>"]},{"start":{"row":50,"column":94},"end":{"row":50,"column":107},"action":"remove","lines":["<font></font>"]},{"start":{"row":51,"column":40},"end":{"row":51,"column":53},"action":"remove","lines":["<font></font>"]},{"start":{"row":52,"column":43},"end":{"row":52,"column":56},"action":"remove","lines":["<font></font>"]},{"start":{"row":53,"column":45},"end":{"row":53,"column":58},"action":"remove","lines":["<font></font>"]},{"start":{"row":54,"column":44},"end":{"row":54,"column":57},"action":"remove","lines":["<font></font>"]},{"start":{"row":56,"column":33},"end":{"row":56,"column":46},"action":"remove","lines":["<font></font>"]},{"start":{"row":57,"column":16},"end":{"row":57,"column":29},"action":"remove","lines":["<font></font>"]},{"start":{"row":58,"column":19},"end":{"row":58,"column":32},"action":"remove","lines":["<font></font>"]},{"start":{"row":59,"column":21},"end":{"row":59,"column":34},"action":"remove","lines":["<font></font>"]},{"start":{"row":60,"column":20},"end":{"row":60,"column":33},"action":"remove","lines":["<font></font>"]},{"start":{"row":65,"column":6},"end":{"row":65,"column":19},"action":"remove","lines":["<font></font>"]},{"start":{"row":66,"column":83},"end":{"row":66,"column":96},"action":"remove","lines":["<font></font>"]},{"start":{"row":67,"column":98},"end":{"row":67,"column":111},"action":"remove","lines":["<font></font>"]},{"start":{"row":68,"column":83},"end":{"row":68,"column":96},"action":"remove","lines":["<font></font>"]},{"start":{"row":69,"column":41},"end":{"row":69,"column":54},"action":"remove","lines":["<font></font>"]},{"start":{"row":70,"column":44},"end":{"row":70,"column":57},"action":"remove","lines":["<font></font>"]},{"start":{"row":71,"column":46},"end":{"row":71,"column":59},"action":"remove","lines":["<font></font>"]},{"start":{"row":72,"column":45},"end":{"row":72,"column":58},"action":"remove","lines":["<font></font>"]},{"start":{"row":73,"column":57},"end":{"row":73,"column":70},"action":"remove","lines":["<font></font>"]},{"start":{"row":74,"column":45},"end":{"row":74,"column":58},"action":"remove","lines":["<font></font>"]},{"start":{"row":75,"column":46},"end":{"row":75,"column":59},"action":"remove","lines":["<font></font>"]},{"start":{"row":76,"column":41},"end":{"row":76,"column":54},"action":"remove","lines":["<font></font>"]},{"start":{"row":77,"column":44},"end":{"row":77,"column":57},"action":"remove","lines":["<font></font>"]},{"start":{"row":78,"column":71},"end":{"row":78,"column":84},"action":"remove","lines":["<font></font>"]},{"start":{"row":79,"column":79},"end":{"row":79,"column":92},"action":"remove","lines":["<font></font>"]},{"start":{"row":80,"column":20},"end":{"row":80,"column":33},"action":"remove","lines":["<font></font>"]},{"start":{"row":81,"column":79},"end":{"row":81,"column":92},"action":"remove","lines":["<font></font>"]},{"start":{"row":82,"column":27},"end":{"row":82,"column":40},"action":"remove","lines":["<font></font>"]},{"start":{"row":83,"column":45},"end":{"row":83,"column":58},"action":"remove","lines":["<font></font>"]},{"start":{"row":84,"column":29},"end":{"row":84,"column":42},"action":"remove","lines":["<font></font>"]},{"start":{"row":135,"column":63},"end":{"row":135,"column":76},"action":"remove","lines":["<font></font>"]},{"start":{"row":176,"column":40},"end":{"row":176,"column":53},"action":"remove","lines":["<font></font>"]},{"start":{"row":198,"column":60},"end":{"row":198,"column":73},"action":"remove","lines":["<font></font>"]},{"start":{"row":214,"column":24},"end":{"row":214,"column":37},"action":"remove","lines":["<font></font>"]},{"start":{"row":219,"column":21},"end":{"row":219,"column":34},"action":"remove","lines":["<font></font>"]},{"start":{"row":220,"column":10},"end":{"row":220,"column":23},"action":"remove","lines":["<font></font>"]},{"start":{"row":221,"column":19},"end":{"row":221,"column":32},"action":"remove","lines":["<font></font>"]},{"start":{"row":222,"column":10},"end":{"row":222,"column":23},"action":"remove","lines":["<font></font>"]},{"start":{"row":223,"column":19},"end":{"row":223,"column":32},"action":"remove","lines":["<font></font>"]},{"start":{"row":224,"column":10},"end":{"row":224,"column":23},"action":"remove","lines":["<font></font>"]},{"start":{"row":225,"column":10},"end":{"row":225,"column":23},"action":"remove","lines":["<font></font>"]},{"start":{"row":226,"column":9},"end":{"row":226,"column":22},"action":"remove","lines":["<font></font>"]},{"start":{"row":227,"column":19},"end":{"row":227,"column":32},"action":"remove","lines":["<font></font>"]},{"start":{"row":229,"column":66},"end":{"row":229,"column":79},"action":"remove","lines":["<font></font>"]},{"start":{"row":234,"column":23},"end":{"row":234,"column":36},"action":"remove","lines":["<font></font>"]}],[{"start":{"row":232,"column":26},"end":{"row":232,"column":27},"action":"insert","lines":[" "],"id":140},{"start":{"row":232,"column":27},"end":{"row":232,"column":28},"action":"insert","lines":[" "]}],[{"start":{"row":233,"column":0},"end":{"row":233,"column":1},"action":"insert","lines":["`"],"id":141},{"start":{"row":233,"column":1},"end":{"row":233,"column":2},"action":"insert","lines":["`"]},{"start":{"row":233,"column":2},"end":{"row":233,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":235,"column":13},"end":{"row":236,"column":0},"action":"insert","lines":["",""],"id":142},{"start":{"row":236,"column":0},"end":{"row":236,"column":1},"action":"insert","lines":["`"]},{"start":{"row":236,"column":1},"end":{"row":236,"column":2},"action":"insert","lines":["`"]},{"start":{"row":236,"column":2},"end":{"row":236,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":237,"column":12},"end":{"row":237,"column":13},"action":"insert","lines":[" "],"id":143},{"start":{"row":237,"column":13},"end":{"row":237,"column":14},"action":"insert","lines":[" "]}],[{"start":{"row":238,"column":14},"end":{"row":238,"column":15},"action":"insert","lines":[" "],"id":144},{"start":{"row":238,"column":15},"end":{"row":238,"column":16},"action":"insert","lines":[" "]}],[{"start":{"row":240,"column":26},"end":{"row":240,"column":27},"action":"insert","lines":[" "],"id":145},{"start":{"row":240,"column":27},"end":{"row":240,"column":28},"action":"insert","lines":[" "]}],[{"start":{"row":239,"column":0},"end":{"row":239,"column":1},"action":"insert","lines":["`"],"id":146},{"start":{"row":239,"column":1},"end":{"row":239,"column":2},"action":"insert","lines":["`"]},{"start":{"row":239,"column":2},"end":{"row":239,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":240,"column":28},"end":{"row":241,"column":0},"action":"insert","lines":["",""],"id":147},{"start":{"row":241,"column":0},"end":{"row":241,"column":1},"action":"insert","lines":["`"]},{"start":{"row":241,"column":1},"end":{"row":241,"column":2},"action":"insert","lines":["`"]},{"start":{"row":241,"column":2},"end":{"row":241,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":243,"column":0},"end":{"row":243,"column":1},"action":"insert","lines":["`"],"id":148},{"start":{"row":243,"column":1},"end":{"row":243,"column":2},"action":"insert","lines":["`"]},{"start":{"row":243,"column":2},"end":{"row":243,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":244,"column":7},"end":{"row":245,"column":0},"action":"insert","lines":["",""],"id":149},{"start":{"row":245,"column":0},"end":{"row":245,"column":1},"action":"insert","lines":["`"]},{"start":{"row":245,"column":1},"end":{"row":245,"column":2},"action":"insert","lines":["`"]},{"start":{"row":245,"column":2},"end":{"row":245,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":245,"column":3},"end":{"row":246,"column":0},"action":"insert","lines":["",""],"id":150},{"start":{"row":246,"column":0},"end":{"row":246,"column":1},"action":"insert","lines":["<"]},{"start":{"row":246,"column":1},"end":{"row":246,"column":2},"action":"insert","lines":[">"]}],[{"start":{"row":246,"column":1},"end":{"row":246,"column":2},"action":"insert","lines":["h"],"id":151},{"start":{"row":246,"column":2},"end":{"row":246,"column":3},"action":"insert","lines":["r"]},{"start":{"row":246,"column":3},"end":{"row":246,"column":4},"action":"insert","lines":["/"]}],[{"start":{"row":246,"column":5},"end":{"row":247,"column":0},"action":"insert","lines":["",""],"id":152}],[{"start":{"row":247,"column":0},"end":{"row":247,"column":18},"action":"insert","lines":["Web UI教程 - 创建自定义视图"],"id":153}],[{"start":{"row":247,"column":0},"end":{"row":247,"column":1},"action":"insert","lines":["#"],"id":154},{"start":{"row":247,"column":1},"end":{"row":247,"column":2},"action":"insert","lines":["#"]},{"start":{"row":247,"column":2},"end":{"row":247,"column":3},"action":"insert","lines":["#"]}],[{"start":{"row":247,"column":3},"end":{"row":247,"column":4},"action":"insert","lines":[" "],"id":155}],[{"start":{"row":248,"column":0},"end":{"row":271,"column":0},"action":"insert","lines":["概观","应用程序设置","如果您愿意，可以导入IntelliJ","构建和安装应用程序","自定义视图简介","模板文件的描述 - 服务器端","AppComponent","AppUiComponent","AppUiMessageHandler","模板文件的描述 - 客户端","sampleCustom.html","外包装","按钮面板","数据面板","sampleCustom.js","外包装","变量","定义控制器 ","sampleCustom.css","胶水文件","css.html","js.html","摘要",""],"id":156}],[{"start":{"row":248,"column":2},"end":{"row":248,"column":3},"action":"insert","lines":[" "],"id":157},{"start":{"row":248,"column":3},"end":{"row":248,"column":4},"action":"insert","lines":[" "]}],[{"start":{"row":249,"column":6},"end":{"row":249,"column":7},"action":"insert","lines":[" "],"id":158},{"start":{"row":249,"column":7},"end":{"row":249,"column":8},"action":"insert","lines":[" "]}],[{"start":{"row":250,"column":18},"end":{"row":250,"column":19},"action":"insert","lines":[" "],"id":159},{"start":{"row":250,"column":19},"end":{"row":250,"column":20},"action":"insert","lines":[" "]}],[{"start":{"row":251,"column":9},"end":{"row":251,"column":10},"action":"insert","lines":[" "],"id":160},{"start":{"row":251,"column":10},"end":{"row":251,"column":11},"action":"insert","lines":[" "]}],[{"start":{"row":252,"column":7},"end":{"row":252,"column":8},"action":"insert","lines":[" "],"id":161},{"start":{"row":252,"column":8},"end":{"row":252,"column":9},"action":"insert","lines":[" "]}],[{"start":{"row":253,"column":14},"end":{"row":253,"column":15},"action":"insert","lines":[" "],"id":162},{"start":{"row":253,"column":15},"end":{"row":253,"column":16},"action":"insert","lines":[" "]}],[{"start":{"row":254,"column":12},"end":{"row":254,"column":13},"action":"insert","lines":[" "],"id":163},{"start":{"row":254,"column":13},"end":{"row":254,"column":14},"action":"insert","lines":[" "]}],[{"start":{"row":255,"column":14},"end":{"row":255,"column":15},"action":"insert","lines":[" "],"id":164},{"start":{"row":255,"column":15},"end":{"row":255,"column":16},"action":"insert","lines":[" "]}],[{"start":{"row":256,"column":19},"end":{"row":256,"column":20},"action":"insert","lines":[" "],"id":165},{"start":{"row":256,"column":20},"end":{"row":256,"column":21},"action":"insert","lines":[" "]}],[{"start":{"row":257,"column":13},"end":{"row":257,"column":14},"action":"insert","lines":[" "],"id":166},{"start":{"row":257,"column":14},"end":{"row":257,"column":15},"action":"insert","lines":[" "]},{"start":{"row":257,"column":15},"end":{"row":257,"column":16},"action":"insert","lines":[" "]}],[{"start":{"row":258,"column":17},"end":{"row":258,"column":18},"action":"insert","lines":[" "],"id":167},{"start":{"row":258,"column":18},"end":{"row":258,"column":19},"action":"insert","lines":[" "]}],[{"start":{"row":259,"column":3},"end":{"row":259,"column":4},"action":"insert","lines":[" "],"id":168},{"start":{"row":259,"column":4},"end":{"row":259,"column":5},"action":"insert","lines":[" "]}],[{"start":{"row":260,"column":4},"end":{"row":260,"column":5},"action":"insert","lines":[" "],"id":169},{"start":{"row":260,"column":5},"end":{"row":260,"column":6},"action":"insert","lines":[" "]}],[{"start":{"row":261,"column":4},"end":{"row":261,"column":5},"action":"insert","lines":[" "],"id":170},{"start":{"row":261,"column":5},"end":{"row":261,"column":6},"action":"insert","lines":[" "]}],[{"start":{"row":262,"column":15},"end":{"row":262,"column":16},"action":"insert","lines":[" "],"id":171},{"start":{"row":262,"column":16},"end":{"row":262,"column":17},"action":"insert","lines":[" "]}],[{"start":{"row":263,"column":3},"end":{"row":263,"column":4},"action":"insert","lines":[" "],"id":172},{"start":{"row":263,"column":4},"end":{"row":263,"column":5},"action":"insert","lines":[" "]}],[{"start":{"row":264,"column":2},"end":{"row":264,"column":3},"action":"insert","lines":[" "],"id":173},{"start":{"row":264,"column":3},"end":{"row":264,"column":4},"action":"insert","lines":[" "]}],[{"start":{"row":265,"column":6},"end":{"row":265,"column":7},"action":"insert","lines":[" "],"id":174},{"start":{"row":265,"column":7},"end":{"row":265,"column":8},"action":"insert","lines":[" "]}],[{"start":{"row":266,"column":16},"end":{"row":266,"column":17},"action":"insert","lines":[" "],"id":175},{"start":{"row":266,"column":17},"end":{"row":266,"column":18},"action":"insert","lines":[" "]}],[{"start":{"row":267,"column":4},"end":{"row":267,"column":5},"action":"insert","lines":[" "],"id":176},{"start":{"row":267,"column":5},"end":{"row":267,"column":6},"action":"insert","lines":[" "]}],[{"start":{"row":268,"column":8},"end":{"row":268,"column":9},"action":"insert","lines":[" "],"id":177},{"start":{"row":268,"column":9},"end":{"row":268,"column":10},"action":"insert","lines":[" "]}],[{"start":{"row":269,"column":7},"end":{"row":269,"column":8},"action":"insert","lines":[" "],"id":178},{"start":{"row":269,"column":8},"end":{"row":269,"column":9},"action":"insert","lines":[" "]}],[{"start":{"row":270,"column":2},"end":{"row":270,"column":3},"action":"insert","lines":[" "],"id":179},{"start":{"row":270,"column":3},"end":{"row":270,"column":4},"action":"insert","lines":[" "]}],[{"start":{"row":247,"column":22},"end":{"row":247,"column":23},"action":"insert","lines":[" "],"id":180},{"start":{"row":247,"column":23},"end":{"row":247,"column":24},"action":"insert","lines":[" "]}],[{"start":{"row":246,"column":5},"end":{"row":247,"column":0},"action":"insert","lines":["",""],"id":181}],[{"start":{"row":271,"column":4},"end":{"row":272,"column":0},"action":"insert","lines":["",""],"id":182},{"start":{"row":272,"column":0},"end":{"row":273,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":273,"column":0},"end":{"row":335,"column":21},"action":"insert","lines":["概观","应用程序可以创建自己的自定义视图，并将它们集成到ONOS Web GUI中。本教程将指导您完成开发此类视图的过程。一家虚构的公司，“Meowster，Inc。” 在整个实施例中使用。本教程假设您已创建顶级目录并已更改为：","","<font style=\"vertical-align: inherit;\"><font style=\"vertical-align: inherit;\">$ mkdir喵喵</font></font><font></font><font style=\"vertical-align: inherit;\"><font style=\"vertical-align: inherit;\">","$ cd喵喵</font></font>","我们还假设您的环境中ONOS工具（脚本）已经来源，如所描述这里。","","应用程序设置","最快的入门方法是使用maven原型创建应用程序源目录结构并用模板代码填充它。（更多细节可以在  这里找到）。我们将创建一个示例应用程序，我们将调用它，不出所料，“示例”：","","（0）创建一个工作目录","","$ mkdir sample<font></font>","$ cd sample"," ","","（1）创建主应用程序","","$ onos-create-app app org.meowster.app.sample meowster-sample","当询问版本时，接受建议的默认值：1.0-SNAPSHOT，然后按Enter键。","","当要求确认属性配置时，请按Enter键。","","groupId: org.meowster.app.sample<font></font>","artifactId: meowster-sample<font></font>","version: 1.0-SNAPSHOT<font></font>","package: org.meowster.app.sample","这个原型已将基本应用程序代码放在名为meowster-sample的目录中。接下来，我们将从叠加原型折叠UI组件...",""," ","","（2）覆盖UI附加组件","","注意，此命令与最后一个命令之间的唯一区别是将app关键字更改为ui ...","","$ onos-create-app ui org.meowster.app.sample meowster-sample","当询问版本时，接受建议的默认值：1.0-SNAPSHOT，然后按Enter键。","","当要求确认属性配置时，请按Enter键。","","","","（3）修改pom.xml文件以正确标记我们的ONOS应用程序：","","$ cd meowster-sample<font></font>","$ vi pom.xml","（3a）更改说明：","","<description>Meowster Sample ONOS App</description>","（3b）在<properties>部分（在说明的正下方），更改应用名称和来源：","","<onos.app.name>org.meowster.app.sample</onos.app.name><font></font>","<onos.app.origin>Meowster, Inc.</onos.app.origin>","pom.xml文件中的其他所有内容都应该不错。","","如果您愿意，可以导入IntelliJ","您可以将应用程序源作为新项目导入IntelliJ 。","","首先选择File - > New - > Project from Existing Sources ...","","","","然后导航到顶级pom.xml文件并按OK："],"id":183}],[{"start":{"row":273,"column":2},"end":{"row":273,"column":3},"action":"insert","lines":[" "],"id":184},{"start":{"row":273,"column":3},"end":{"row":273,"column":4},"action":"insert","lines":[" "]}],[{"start":{"row":275,"column":0},"end":{"row":275,"column":1},"action":"insert","lines":["`"],"id":185},{"start":{"row":275,"column":1},"end":{"row":275,"column":2},"action":"insert","lines":["`"]},{"start":{"row":275,"column":2},"end":{"row":275,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":277,"column":20},"end":{"row":278,"column":0},"action":"insert","lines":["",""],"id":186},{"start":{"row":278,"column":0},"end":{"row":278,"column":1},"action":"insert","lines":["`"]},{"start":{"row":278,"column":1},"end":{"row":278,"column":2},"action":"insert","lines":["`"]},{"start":{"row":278,"column":2},"end":{"row":278,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":276,"column":101},"end":{"row":276,"column":114},"action":"remove","lines":["<font></font>"],"id":187},{"start":{"row":286,"column":14},"end":{"row":286,"column":27},"action":"remove","lines":["<font></font>"]},{"start":{"row":297,"column":32},"end":{"row":297,"column":45},"action":"remove","lines":["<font></font>"]},{"start":{"row":298,"column":27},"end":{"row":298,"column":40},"action":"remove","lines":["<font></font>"]},{"start":{"row":299,"column":21},"end":{"row":299,"column":34},"action":"remove","lines":["<font></font>"]},{"start":{"row":318,"column":20},"end":{"row":318,"column":33},"action":"remove","lines":["<font></font>"]},{"start":{"row":325,"column":54},"end":{"row":325,"column":67},"action":"remove","lines":["<font></font>"]}],[{"start":{"row":278,"column":0},"end":{"row":278,"column":3},"action":"remove","lines":["```"],"id":188}],[{"start":{"row":277,"column":20},"end":{"row":278,"column":0},"action":"insert","lines":["",""],"id":190}],[{"start":{"row":278,"column":0},"end":{"row":278,"column":1},"action":"insert","lines":["`"],"id":192},{"start":{"row":278,"column":1},"end":{"row":278,"column":2},"action":"insert","lines":["`"]},{"start":{"row":278,"column":2},"end":{"row":278,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":286,"column":0},"end":{"row":286,"column":1},"action":"insert","lines":["`"],"id":193},{"start":{"row":286,"column":1},"end":{"row":286,"column":2},"action":"insert","lines":["`"]},{"start":{"row":286,"column":2},"end":{"row":286,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":289,"column":1},"end":{"row":289,"column":2},"action":"insert","lines":["`"],"id":194},{"start":{"row":289,"column":2},"end":{"row":289,"column":3},"action":"insert","lines":["`"]},{"start":{"row":289,"column":3},"end":{"row":289,"column":4},"action":"insert","lines":["`"]}],[{"start":{"row":289,"column":0},"end":{"row":289,"column":1},"action":"remove","lines":[" "],"id":195}],[{"start":{"row":293,"column":0},"end":{"row":293,"column":1},"action":"insert","lines":["`"],"id":196}],[{"start":{"row":293,"column":62},"end":{"row":293,"column":63},"action":"insert","lines":["`"],"id":197}],[{"start":{"row":310,"column":1},"end":{"row":310,"column":2},"action":"insert","lines":["`"],"id":198}],[{"start":{"row":310,"column":1},"end":{"row":310,"column":2},"action":"remove","lines":["`"],"id":199}],[{"start":{"row":310,"column":0},"end":{"row":310,"column":1},"action":"insert","lines":["`"],"id":200}],[{"start":{"row":310,"column":61},"end":{"row":310,"column":62},"action":"insert","lines":["`"],"id":201}],[{"start":{"row":317,"column":31},"end":{"row":317,"column":32},"action":"insert","lines":[" "],"id":202},{"start":{"row":317,"column":32},"end":{"row":317,"column":33},"action":"insert","lines":[" "]}],[{"start":{"row":318,"column":0},"end":{"row":318,"column":1},"action":"insert","lines":["`"],"id":203},{"start":{"row":318,"column":1},"end":{"row":318,"column":2},"action":"insert","lines":["`"]},{"start":{"row":318,"column":2},"end":{"row":318,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":320,"column":12},"end":{"row":321,"column":0},"action":"insert","lines":["",""],"id":204},{"start":{"row":321,"column":0},"end":{"row":321,"column":1},"action":"insert","lines":["`"]},{"start":{"row":321,"column":1},"end":{"row":321,"column":2},"action":"insert","lines":["`"]},{"start":{"row":321,"column":2},"end":{"row":321,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":322,"column":9},"end":{"row":322,"column":10},"action":"insert","lines":[" "],"id":205},{"start":{"row":322,"column":10},"end":{"row":322,"column":11},"action":"insert","lines":[" "]}],[{"start":{"row":324,"column":0},"end":{"row":324,"column":1},"action":"insert","lines":["`"],"id":206}],[{"start":{"row":324,"column":52},"end":{"row":324,"column":53},"action":"insert","lines":["`"],"id":207}],[{"start":{"row":324,"column":53},"end":{"row":324,"column":54},"action":"insert","lines":[" "],"id":208},{"start":{"row":324,"column":54},"end":{"row":324,"column":55},"action":"insert","lines":[" "]}],[{"start":{"row":325,"column":38},"end":{"row":325,"column":39},"action":"insert","lines":[" "],"id":209}],[{"start":{"row":325,"column":38},"end":{"row":325,"column":39},"action":"remove","lines":[" "],"id":210}],[{"start":{"row":325,"column":39},"end":{"row":325,"column":40},"action":"insert","lines":[" "],"id":211},{"start":{"row":325,"column":40},"end":{"row":325,"column":41},"action":"insert","lines":[" "]}],[{"start":{"row":326,"column":0},"end":{"row":326,"column":1},"action":"insert","lines":["`"],"id":212},{"start":{"row":326,"column":1},"end":{"row":326,"column":2},"action":"insert","lines":["`"]},{"start":{"row":326,"column":2},"end":{"row":326,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":328,"column":49},"end":{"row":329,"column":0},"action":"insert","lines":["",""],"id":213},{"start":{"row":329,"column":0},"end":{"row":329,"column":1},"action":"insert","lines":["`"]},{"start":{"row":329,"column":1},"end":{"row":329,"column":2},"action":"insert","lines":["`"]},{"start":{"row":329,"column":2},"end":{"row":329,"column":3},"action":"insert","lines":["`"]}],[{"start":{"row":337,"column":0},"end":{"row":337,"column":43},"action":"insert","lines":["![upload successful](/images/pasted-86.png)"],"id":214},{"start":{"row":340,"column":0},"end":{"row":782,"column":0},"action":"insert","lines":["","![upload successful](/images/pasted-87.png)","在下一个屏幕上，您可能希望勾选以下两项：","","递归搜索项目","自动导入Maven项目","...因为默认情况下未选中它们。","","","![upload successful](/images/pasted-88.png)","","IntelliJ应该找到1.0-SNAPSHOT：","","![upload successful](/images/pasted-89.png)","如果选择Java版本，请选择1.8：","","![upload successful](/images/pasted-90.png)","最后，完成项目名称：","","![upload successful](/images/pasted-91.png)","加载项目后，您应该最终看到如下目录结构：","","![upload successful](/images/pasted-92.png)","","构建和安装应用程序","从顶级项目目录（带有pom.xml文件的目录）构建项目：  ","","`$ mvn clean install`","请注意，您的应用程序捆绑为目标目录中的  .oar  （O NOS  A pplication A R chive）文件，并安装到您的本地maven存储库中：","```","...","[INFO] Installing /Users/simonh/dev/meow/sample/meowster-sample/target/meowster-sample-1.0-SNAPSHOT.oar to","  /Users/simonh/.m2/repository/org/meowster/app/sample/meowster-sample/1.0-SNAPSHOT/meowster-sample-1.0-SNAPSHOT.oar","...","``` ","","假设您在本地计算机上运行ONOS，则可以从命令行安装（并激活）该应用程序：","","`$ onos-app localhost install! target/meowster-sample-1.0-SNAPSHOT.oar`","你应该看到一些看起来像这样的JSON输出：","```","{","  \"name\":\"org.meowster.app.sample\",","  \"id\":39,","  \"version\":\"1.0.SNAPSHOT\",","  \"description\":\"Meowster Sample ONOS App\",","  \"origin\":\"Meowster, Inc.\",","  \"permissions\":\"[]\",","  \"featuresRepo\":\"mvn:org.meowster.app.sample/meowster-sample/1.0-SNAPSHOT/xml/features\",","  \"features\":\"[meowster-sample]\",","  \"state\":\"ACTIVE\"","}","```","（请注意，上面的内容已经过格式化以便于阅读;您将看到的内容会更加平滑。）","在Web浏览器中刷新GUI后，导航菜单应该有一个额外的条目：  ","","![upload successful](/images/pasted-93.png)","单击此项应导航到注入的示例自定义视图：","","![upload successful](/images/pasted-94.png)","","使用鼠标单击“ 获取数据”按钮或按空格键将使用新数据更新视图。","","请注意，按斜杠（/）将显示“快速帮助”面板：","","![upload successful](/images/pasted-95.png)","正如您将在代码中看到的那样（在后面的部分中），我们使用空格键创建了一个键绑定（以获取数据）; 因此它列在快速帮助面板中。","","另外值得注意的是：按下T键将切换浅色和深色之间的“主题” ：  ","","![upload successful](/images/pasted-96.png)","现在我们已经构建了应用程序并安装了自定义视图，让我们来看看实现这一目标的代码......","","自定义视图简介  ","要创建自定义视图，需��客户端和服务器端资源; 客户端包含HTML，JavaScript和CSS文件，服务器端包含Java类。  ","","HTML文件定义自定义视图的结构，并向Angular指示需要注入值的位置。  ","JavaScript文件为视图创建Angular控制器，并定义驱动视图的代码。  ","CSS文件定义自定义样式。  ","服务器端Java代码：  ","使用GUI框架注册视图  ","接收来自客户端的请求，获取数据，并将信息发送回客户端  "," ","","模板文件的描述 - 服务器端  ","本节���要介绍了原型生成的文件。  ","","AppComponent  ","这是基本的Application类，可用于非UI相关的功能（本教程中未涉及）。   ","","AppUiComponent  ","这是UI功能的基类。下面介绍要注意的显着特征。  ",""," ","","（1）对UiExtensionService的引用：  ","```","@Reference(cardinality = ReferenceCardinality.MANDATORY_UNARY)","```","protected UiExtensionService uiExtensionService;","提供对UI扩展服务的访问，以便我们可以注册我们的“视图”。  ",""," ","","（2）应用程序视图描述符列表，定义视图在GUI导航窗格中显示的类别，视图的内部标识符以及相应的显示文本：  ","```","private static final String VIEW_ID = \"sampleCustom\";","private static final String VIEW_TEXT = \"Sample Custom\";","...","private final List<UiView> uiViews = ImmutableList.of(","        new UiView(UiView.Category.OTHER, VIEW_ID, VIEW_TEXT)",");","```","请注意，我们的应用程序仅提供单个视图，但如果需要，可以在此处定义更多视图。  ",""," ","","（3）声明UiMessageHandlerFactory以按需生成消息处理程序。示例工厂每次生成一个处理程序AppUiMessageHandler，如下所述：  ","```","private final UiMessageHandlerFactory messageHandlerFactory =","        () -> ImmutableList.of(","                new AppUiMessageHandler()","        );","```","通常，每个贡献视图应该有一个消息处理程序。",""," ","","（4）使用先前声明的UI视图描述符和消息处理程序工厂配置的UiExtension声明：","```","protected UiExtension extension =","        new UiExtension.Builder(getClass().getClassLoader(), uiViews)","                .resourcePath(VIEW_ID)","                .messageHandlerFactory(messageHandlerFactory)<font></font>","                .build();"," ```","","（5）在适当的时间注册和取消注册UI扩展的激活和取消激活回调：","```","@Activate","protected void activate() {","    uiExtensionService.register(extension);","    log.info(\"Started\");","}","@Deactivate","protected void deactivate() {","    uiExtensionService.unregister(extension);","    log.info(\"Stopped\");","}","```","AppUiMessageHandler","此类扩展UiMessageHandler以实现代码以处理来自（客户端）示例自定义视图的事件。  ",""," ","","突出的特点：","","（1）实现createRequestHandlers（）从我们的视图中为特定事件类型提供请求处理程序实现：   ","```","@Override","protected Collection<RequestHandler> createRequestHandlers() {","    return ImmutableSet.of(","            new SampleCustomDataRequestHandler()<font></font>","    );","}","```","对于我们的视图生成的每个事件类型，应该有一个请求处理程序类。在这种情况下，我们只需处理单个事件，因此我们只有一个处理程序。  ",""," ","","（2）定义SampleCustomDataRequestHandler类来处理来自客户端的“sampleCustomDataRequest”事件。   ","```","private static final String SAMPLE_CUSTOM_DATA_REQ = \"sampleCustomDataRequest\";","...","private final class SampleCustomDataRequestHandler extends RequestHandler {","    private SampleCustomDataRequestHandler() {","        super(SAMPLE_CUSTOM_DATA_REQ);","    }","    ...","}","```","请注意，此类扩展了  RequestHandler，它定义了一个由子类实现的抽象process（）方法。  ","","构造函数采用要处理的事件的名称; 在运行时，此处理程序的实例绑定到事件名称，并且每次从客户端收到此类事件时都会调用process（）方法。  ",""," ","","（3）实现process（）方法：","```","private static final String SAMPLE_CUSTOM_DATA_RESP = \"sampleCustomDataResponse\";<font></font>","<font></font>","private static final String NUMBER = \"number\";<font></font>","private static final String SQUARE = \"square\";<font></font>","private static final String CUBE = \"cube\";<font></font>","private static final String MESSAGE = \"message\";<font></font>","private static final String MSG_FORMAT = \"Next incrememt is %d units\";<font></font>","<font></font>","private long someNumber = 1;<font></font>","private long someIncrement = 1;<font></font>","...<font></font>"," <font></font>","@Override<font></font>","public void process(long sid, ObjectNode payload) {<font></font>","    someIncrement++;<font></font>","    someNumber += someIncrement;<font></font>","    log.debug(\"Computing data for {}...\", someNumber);<font></font>","<font></font>","    ObjectNode result = objectNode();<font></font>","    result.put(NUMBER, someNumber);<font></font>","    result.put(SQUARE, someNumber * someNumber);<font></font>","    result.put(CUBE, someNumber * someNumber * someNumber);<font></font>","    result.put(MESSAGE, String.format(MSG_FORMAT, someIncrement + 1));<font></font>","    sendMessage(SAMPLE_CUSTOM_DATA_RESP, 0, result);<font></font>","}","```","每次从客户端收到“sampleCustomDataRequest”事件时，都会调用该过程方法。   ","","的SID参数（序列ID）被弃用。  ","","所述有效载荷参数提供请求事件，其在此特定情况下不携带数据的有效载荷。  ","","该方法创建并填充ObjectNode  实例，其中数据将（转换为JSON）发送回客户端。  ","","模板文件的描述 - 客户端  ","请注意，在构建存档时，必须遵守目录命名约定，以便将文件放在正确的位置。由于我们的视图具有唯一标识符“sampleCustom”，因此其客户端源文件应放在〜/ src / main / resources / app / view / sampleCustom目录下。  ","","客户端文件\tUI视图的客户端文件\t“sampleCustom”视图的客户端文件  ","这里有三个文件：  ","","sampleCustom.html  ","sampleCustom.js  ","sampleCustom.css  ","请注意使用视图标识符命名这些文件的约定; 在本例中为“sampleCustom”。  ","","sampleCustom.html  ","这是示例自定义视图的HTML代码段，提供了视图的结构。请注意，此HTML标记由Angular注入Web UI ，以便在用户导航时使视图“可见”。  ","","让我们分节描述文件的不同部分......  ","","外包装  ","```","<!-- partial HTML -->","<div id=\"ov-sample-custom\">","    ...","</div>","```","外部<div>元素定义了我们自定义“视图”的内容。它应该使用以字符串分隔的视图内部标识符的id，前缀为“ov”。因此，在我们的示例中，“sampleCustom”变为“ov-sample-custom”。（“ov”代表“ONOS视图”）。","","按钮面板  ","我们已经定义了一个<div>来在视图的顶部创建一个“按钮面板”：  ","```","<div class=\"button-panel\">","    <div class=\"my-button\" ng-click=\"getData()\">","        Fetch Data","    </div>","</div>","```","请注意，我们在按钮<div>中使用Angular的ng-click属性来指示Angular 在用户单击<div>时调用getData（）函数（在我们的“范围”中定义，见后面）。  ","","数据面板  ","我们已经定义了一个<div>来在按钮面板下面创建一个“数据面板”：  ","```","<div class=\"data-panel\"><font></font>","    <table><font></font>","        <tr><font></font>","            <td> Number </td><font></font>","            <td class=\"number\"> {{data.number}} </td><font></font>","        </tr><font></font>","        <tr><font></font>","            <td> Square </td><font></font>","            <td class=\"number\"> {{data.square}} </td><font></font>","        </tr><font></font>","        <tr><font></font>","            <td> Cube </td><font></font>","            <td class=\"number\"> {{data.cube}} </td><font></font>","        </tr><font></font>","    </table><font></font>","<font></font>","    <p><font></font>","        A message from our sponsors:<font></font>","    </p><font></font>","    <p><font></font>","        <span class=\"quote\"> {{data.message}} </span><font></font>","    </p><font></font>","</div>","```","注意使用Angular的双括号  {{}}进行变量替换。例如，表达式  {{data.number}} 将替换为存储在“scope”上的数据对象的number属性的当前值（请参阅后面��内容）。  ","","sampleCustom.js  ","此文件定义视图控制器，并提供回调函数来驱动视图。","","同样，我们将在以下部分中检查代码的不同部分：  ","外包装","匿名函数调用用于包装文件的内容，以提供私有范围（使我们的变量和函数不在全局范围内）：","","// js for sample app custom view<font></font>","(function () {<font></font>","    'use strict';<font></font>","<font></font>","    ...<font></font>","}()); ","变量","声明变量用于保存注入引用（���制台记录器，范围，服务...）和配置“常量”：","","// injected refs<font></font>","var $log, $scope, wss, ks;<font></font>","<font></font>","// constants<font></font>","var dataReq = 'sampleCustomDataRequest',<font></font>","    dataResp = 'sampleCustomDataResponse';","请注意，请求和响应事件字符串遵循使用视图ID作为前缀的约定。这可以保证我们的事件名称与任何其他视图的名称不同。","","定义控制器 ","我们暂时跳过辅助函数并专注于控制器：","","angular.module('ovSampleCustom', [])<font></font>","    .controller('OvSampleCustomCtrl', <font></font>","    [ '$log', '$scope', 'WebSocketService', 'KeyService',<font></font>"," <font></font>","    function (_$log_, _$scope_, _wss_, _ks_) { <font></font>","        ...<font></font>","    }]);","这里的第一行用angular注册我们的“ovSampleCustom”模块（空数组表明我们的模块不依赖于任何其他模块）。再次注意游戏中的命名约定; 模块名称应以“ov”（小写）开头，后跟我们视图的标识符，继续驼峰式。","","所述控制器（）函数被调用所返回的模块引用以限定我们的控制器。第一个参数 - “ OvSampleCustomCtrl ” - 是我们控制器的名称。再一次，约定是以“Ov”（大写的“O”）开头，后跟我们视图的标识符（继续驼峰式），然后是“Ctrl”。第二个参数是一个数组......","","数组的所有元素（除了最后一个）是在运行时注入控制器函数的服务的名称。Angular使用这些将实际服务绑定到控制器函数的指定参数（数组中的最后一项）。",""," ","","在我们的控制器函数中，我们首先在闭包中保存注入的引用，以便它们可用于其他函数：","","$log = _$log_;<font></font>","$scope = _$scope_;<font></font>","wss = _wss_;<font></font>","ks = _ks_;"," ","","我们也初始化我们的州; 我们的事件处理程序映射，以及来自服务器的初始缓存“数据”。","","var handlers = {};<font></font>","$scope.data = {};"," ","","接下来，我们需要告诉WebSocketService在从服务器到达“sampleCustomDataResponse”事件时调用哪个回调函数：","","handlers[dataResp] = respDataCb;<font></font>","wss.bindHandlers(handlers);","回调函数（我们之前跳过的辅助方法之一）的作用是将我们的范围变量数据设置为事件的有效负载（将其作为第一个参数传递给函数），然后将角度调整为re -process，（例如，使用新数据更新{{}}替换）：","","function respDataCb(data) {<font></font>","    $scope.data = data;<font></font>","    $scope.$apply();<font></font>","}","有关事件处理程序绑定的更多详细信息，请参阅Web套接字服务。",""," ","","接下来，我们添加我们的键绑定：","","addKeyBindings();","..委托另��个先前跳过的函数：","","function addKeyBindings() {<font></font>","    var map = {<font></font>","        space: [getData, 'Fetch data from server'],<font></font>"," <font></font>","        _helpFormat: [<font></font>","            ['space']<font></font>","        ]<font></font>","    };<font></font>"," <font></font>","    ks.keyBindings(map);<font></font>","}","映射条目使用众所周知的逻辑键来标识键击（在此示例中为空格键的“空格”），其值为双元素数组; 第一个元素是回调函数引用，第二个元素是要在“快速帮助”面板中显示的相应键的文本。","","该_helpFormat关键是使用的特殊值快速帮助服务奠定了绑定按键的定义; 主阵列中的每个子阵列都是面板中的“列”; 每个子数组中的条目定义键列出的顺序。","","有关将键击绑定到操作的更多信息，以及有关_helpFormat数组的更多信息，请参阅密钥服务。","","该的getData（）函数告诉WebSocketService的数据请求事件发送到服务器：","","function getData() {<font></font>","    wss.sendEvent(dataReq);<font></font>","}","由于没有为sendEvent（）调用提供第二个参数，因此Web套接字服务默认发送空的有效负载以及事件。",""," ","","还记得HTML代码段中“button”div中的ng-click 属性吗？好吧，这里我们在我们的范围上设置函数引用，以绑定到该元素的click处理程序：","","// custom click handler<font></font>","$scope.getData = getData;"," ","","要在第一次加载时填充我们的视图，我们需要显式地向服务器发送一个事件：","","// get data the first time...<font></font>","getData();"," ","","当我们的视图被销毁时（当用户导航到其他视图时），我们需要进行一些清理：","","// cleanup<font></font>","$scope.$on('$destroy', function () {<font></font>","    wss.unbindHandlers(handlers);<font></font>","    ks.unbindKeys();<font></font>","    $log.log('OvSampleCustomCtrl has been destroyed');<font></font>","});","我们取消绑定事件处理程序和键绑定，并将消息记录到控制台。",""," ","","控制器在初始化时执行的最后一件事是登录控制台：",""," $log.log('OvSampleCustomCtrl has been created');","sampleCustom.css","客户端三人组中的最后一个文件是自定义视图的样式表：",""," 展开源码","这应该是相当不言自明的。但是，请注意使用.light和.dark类根据每个GUI主题更改颜色选择。","胶水文件","这个难题的最后一块是两个“粘合”文件，用于将对客户端源的引用修补到index.html。这些文件位于~src / main / resources / sampleCustom目录中。它们必须分别命名为css.html 和js.html，因此框架可以找到它们。","","css.html","这是一个注入index.html的简短片段。它只包含一行：","","<link rel=\"stylesheet\" href=\"app/view/sampleCustom/sampleCustom.css\"> ","js.html","这是一个注入index.html的简短片段。它只包含一行：",""," <script src=\"app/view/sampleCustom/sampleCustom.js\"></script>"," ","","摘要","显然，此示例页面没有做任何特别有用的事情，但它应该作为如何将事物拼接在一起以创建自己的自定义视图的模板。请记住遵循命名约定 - 通常，使用您的视图ID作为DOM元素，事件名称和其他“公共”标识符的前缀。","","玩得开心创造自己的观点！",""," ","","",""]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":8,"column":3},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1565425765217,"hash":"520d1d9a54de671d3d573b75d3c29cc163ae2130"}