title: SQLAlert 字符串函数
tags:
  - SQLAlert
categories:
  - IT
author: Joe Tong
date: 2019-06-21 23:17:00
---
## 字符串函数
本小节介绍 RDL 中字符串相关函数。

### str(v)
本函数将指定的参数转化成字符串类型，返回转化后的字符串。该函数接收 1 个参数：

- v: 任意类型，需要转化值或变量。

该函数代码示例如下：

> ~~~ {.id .cs .numberLines}
> print(str(1));
> print(str([1, 2, 3]));
> ~~~

示例代码的输出内容如下：

> ~~~ {.id .cs}
> 1
> [1,2,3]
> ~~~

### split(str, sep)
本函数将指定的字符串分割成一个字符串数组，该函数接收 2 个参数：

- str: 字符串类型，需要分割的字符串。
- sep: 字符串类型「可选」，字符串分割符。如果该参数不指定，则以所有空白为分隔符，即将字符串分割为若干个“域”。

该函数代码示例如下：

> ~~~ {.id .cs .numberLines}
> print(split("zhang Wang  li han"));
> print(split("zhang Wang  li han", " "));
> ~~~

示例代码的输出内容如下：

> ~~~ {.id .cs}
> ["zhang","Wang","li","han"]
> ["zhang","Wang","","li","han"]
> ~~~

请读者自行研究该示例两处 split() 函数用法的差异。

### trim(str, sep)
本函数去除指定字符串左右两边的空白，返回新字符串，原字符串保持不变。该函数接收 1 个参数：

- str: 字符串类型，需要去除空白的字符串。

该函数代码示例如下：

> ~~~ {.id .cs .numberLines}
> print(trim("      zhang      "));
> ~~~

示例代码的输出内容如下：

> ~~~ {.id .cs}
> zhang
> ~~~

### fmt_int(num)
本函数将指定的数值格按照整型进行格式化成字符串，在格式化浮点数时，将舍去所有小数部分。该函数接收 1 个参数：

- num: 整型或浮点型，需要格式化的数值。

该函数代码示例如下：

> ~~~ {.id .cs .numberLines}
> print(fmt_int(10));
> print(fmt_int(123.567));
> print(fmt_int(123.456));
> ~~~

示例代码的输出内容如下：

> ~~~ {.id .cs}
> 10
> 123
> 123
> ~~~

### fmt_float(float, n)
本函数将指定的浮点数格式成字符串，保留指定位数的小数。舍去多余的小数位数时，按“四舍五入”进行进位操作。该函数接收 1 个参数：

- float: 浮点数，需要格式化的浮点数；
- n:     需要保留的小位个数。

该函数代码示例如下：

> ~~~ {.id .cs .numberLines}
> print(fmt_float(123.567898, 0));
> print(fmt_float(123.456253, 2));
> ~~~

示例代码的输出内容如下：

> ~~~ {.id .cs}
> 124
> 123.46
> ~~~

### fmt_bytes(int) || fmt_bits(int)
本函数将指定的整数格式化成带字节（B）或比特单位（b）的字符串，格式化时按 1024 进行取余操作，并保留小数点后面 1 位。该函数接收 1 个参数：

- int: 整数，需要格式化的整数。

该函数代码示例如下：

> ~~~ {.id .cs .numberLines}
> print(fmt_bytes(1234859));
> print(fmt_bits(190933388));
> ~~~

示例代码的输出内容如下：

> ~~~ {.id .cs}
> 1.2 MB
> 182.1 Mb
> ~~~

### fmt_pct(num) || fmt_percentage(num)
本函数将指定的整数或浮点数据格式化成百分比字符串，并保留小数点后 2 位。该函数接收 1 个参数：

- num: 整数或浮点数，需要格式化的整数。

该函数代码示例如下：

> ~~~ {.id .cs .numberLines}
> print(fmt_pct(0.12303));
> print(fmt_pct(0.12344));
> ~~~

示例代码的输出内容如下：

> ~~~ {.id .cs}
> 12.30%
> 12.34%
> ~~~

### fmt_time(int, type)
本函数将指定的整数格式化带单位的时间间隔，并保留秒后面小数点 3 位，来表示毫秒。该函数接收 2 个参数：

- int:  整数，需要格式化的时间间隔。
- type: 字符串类型「可选」，时间间隔类型 ms（毫秒） 或 us （微秒），如果不指定，则默认为 ms。 

该函数代码示例如下：

> ~~~ {.id .cs .numberLines}
> print(fmt_time(1234567));
> print(fmt_time(1234567, "ms"));
> print(fmt_time(1234567, "us"));
> ~~~

示例代码的输出内容如下：

> ~~~ {.id .cs}
> 20m 34.567s
> 20m 34.567s
> 1.234s
> ~~~

